{"version":3,"sources":["admin.js","edd-rbm-repeater.js","foundation-init.js","ajax-slack-team-invite.js","ancient-browser-support.js","edd-repeater-form.js","notification-repeater.js","slack-oauth2.js"],"names":["init_edd_repeater_colorpickers","modal","regex","jQuery","find","length","each","index","colorPicker","value","exec","outerHTML","data","val","attr","wpColorPicker","init_edd_repeater_chosen","chosen","initModals","item","$modal","uuid","Math","round","pow","random","toString","slice","Foundation","Reveal","openModal","row","arguments","undefined","type","$row","eddSlackSelectedDownloads","foundation","closest","scrollTop","closeModal","$","getUrlParameter","variable","url","window","location","href","replace","vars","split","i","pair","sendInvite","id","output","noAsync","result","ajax","async","origin","ajaxurl","_ajax_nonce","action","success","response","message","ok","error","eddSlack","i18n","slackInvite","channel_not_found","no_perms","already_in_team","request","status","console","responseText","document","ready","submit","event","preventDefault","$form","this","$submitButton","activeElement","remove","append","currentTarget","HTMLFormElement","prototype","reportValidity","validationError","valid","element","setCustomValidity","hasClass","before","$repeaters","edd_repeater_show","html","stop","slideDown","repeater","trigger","edd_repeater_hide","confirmDeletion","confirm","postID","post_id","parent","setTimeout","effect","color","dequeue","slideUp","$repeater","$dummy","repeaters","show","hide","setIndexes","on","title","defaultValue","attachNotificationSubmitEvent","wrap","addClass","submitText","checkValidity","repeaterList","RegExp","field","name","match","is","prop","lastIndex","edd_slack_conditional_fields","option_class","select","$download","$downloadExclusions","variantExclusion","indexOf","every","removeClass","not","siblings","checkbox","tooltip","content","tooltipClass","position","my","at","collision","duration","edd_slack_exclusion_toggle","eddSlackNotificationIndicators","header","active","$repeaterItem","valueIndex","after","inactiveText","init_edd_slack_repeater_functionality","justAdded","filter","key","splice","EDDSlackOauthPopup","options","windowName","windowOptions","callback","reload","redirectURI","tokenType","that","_oauthWindow","open","path","_oauthInterval","setInterval","clearInterval","close","e","oAuthURL","decodeURIComponent","dualScreenLeft","screenLeft","screen","left","dualScreenTop","screenTop","top","popupWidth","popupHeight","browserWidth","innerWidth","documentElement","clientWidth","width","browserHeight","innerHeight","clientHeight","height","newURL"],"mappings":"AAAA,YCCA,SAASA,gCAAgCC,GAExC,GAAIC,GAAQ,kCAGPC,QAAQF,GAAQG,KAAM,qBAAsBC,OAAS,GAGzDF,OAAQF,GAAQG,KAAM,qBAAsBE,KAAM,SAAUC,EAAOC,GAGlE,GAAIC,GAAQP,EAAMQ,KAAMP,OAAQK,GAAc,GAAGG,UAGhDF,GADc,OAAVA,EACIA,EAAM,GAGNN,OAAQK,GAAcI,KAAM,gBAGrCT,OAAQK,GAAcK,IAAKJ,GAAQK,KAAM,QAASL,GAAQM,kBAQ7D,QAASC,0BAA0Bf,GAG7BE,OAAQF,GAAQG,KAAM,2BAA4BC,QAGtDF,OAAQF,GAAQG,KAAM,qBAAsBa,SC7B9C,QAASC,cAERf,OAAQ,4CAA6CG,KAAM,SAAUC,EAAOY,GAE3E,GAAIC,GAASjB,OAAQgB,GAAOf,KAAM,mCAElC,IAAsC,KAAjCgB,EAAON,KAAM,eAAyB,OAAO,CAGlD,IAAIO,GAAOC,KAAKC,MAAOD,KAAKE,IAAK,GAAI,GAAMF,KAAKG,SAAWH,KAAKE,IAAK,GAAI,IAAME,SAAU,IAAKC,MAAO,GAAM,SAE3GP,GAAON,KAAM,cAAeO,EAEVlB,QAAQgB,GAAOf,KAAM,6BAA8BU,KAAM,YAAaO,EAExFD,GAAS,GAAIQ,YAAWC,OAAQT,KAelC,QAASU,WAAWT,GAAwB,GAAlBU,GAAkBC,UAAA3B,OAAA,GAAA4B,SAAAD,UAAA,GAAAA,UAAA,GAAZC,MAG/B,IAAkB,wBAAbZ,EAAKa,KAAiC,CAE1C,GAAIC,GAAOhC,OAAQ4B,EAEnBV,GAAOc,EAAK/B,KAAM,6BAA8BQ,KAAM,QAIvD,GAAIQ,GAASjB,OAAQ,iBAAmBkB,EAAO,KAG/Ce,2BAA4BhB,EAAOhB,KAAM,uBAAwBS,MAGjEuB,0BAA4D,OAA9BA,6BAA4CA,0BAE1EhB,EAAOiB,WAAY,QAGnBjB,EAAOkB,QAAS,mBAAoBC,UAAW,GAYhD,QAASC,YAAYnB,GAEpB,GAAID,GAASjB,OAAQ,iBAAmBkB,EAAO,KAE/CD,GAAOiB,WAAY,UC1EpB,SAAYI,GA0FX,QAASC,GAAiBC,GAA4B,GAAlBC,GAAkBZ,UAAA3B,OAAA,GAAA4B,SAAAD,UAAA,GAAAA,UAAA,GAAZC,MAE5BA,UAARW,IACJA,EAAMC,OAAOC,SAASC,MAIvBH,EAAMA,EAAII,QAAS,OAAQ,GAI3B,KAAM,GAFFC,GAAOL,EAAIM,MAAO,KAEZC,EAAI,EAAGA,EAAIF,EAAK5C,OAAQ8C,IAAM,CAEvC,GAAIC,GAAOH,EAAME,GAAID,MAAO,IAE5B,IAAKE,EAAK,IAAMT,EACf,MAAOS,GAAK,GAKd,OAAO,EApGR,GAAIC,GAAa,SAAUC,EAAIpB,GAE9B,GAAIqB,GACHC,IA+DD,OA3DAA,GAAU,SAAUF,EAAIpB,GAEvB,GAAIuB,KAmDJ,OAlDAhB,GAAEiB,MACDC,OAAO,EACPzB,KAAM,OACNU,IAAKE,SAASc,OAASC,QACvBjD,MACC0C,GAAIA,EACJpB,KAAMA,EACN4B,YAAarB,EAAG,gCAAiC5B,MACjDkD,OAAQ,6BAETC,QAAS,SAAUC,GAElB,GAAIC,GAAU,EAGd,IAAKD,EAASE,MAAO,EAEpB,OAASF,EAASG,OACjB,IAAK,oBACJF,EAAUG,SAASC,KAAKC,YAAYC,iBACpC,MACD,KAAK,WACJN,EAAUG,SAASC,KAAKC,YAAYE,QACpC,MACD,KAAK,kBACJP,EAAUG,SAASC,KAAKC,YAAYG,eACpC,MACD,SACCR,EAAUD,EAASG,UAMrBF,GAAUG,SAASC,KAAKC,YAAarC,EAAO,qBAI7CuB,IACCU,GAAIF,EAASE,GACbD,QAASA,IAIXE,MAAQ,SAAUO,EAASC,EAAQR,GAClCS,QAAQT,MAAOO,EAAQG,cACvBD,QAAQT,MAAOA,MAIVX,GAELH,EAAIpB,GAEPqB,EAASC,EAwCVf,GAAGsC,UAAWC,MAAO,WAEpBvC,EAAG,4EAA6EwC,OAAQ,SAAUC,GAEjGA,EAAMC,gBAEN,IAAIC,GAAQ3C,EAAG4C,MACdC,EAAgB7C,EAAGsC,SAASQ,cAE7BD,GAAcxE,KAAM,YAAY,GAGhCsE,EAAMhF,KAAM,gBAAiBoF,SAC7BJ,EAAMK,OAAQ,yEAEd,IAAInC,GAAKZ,EAAiB,MACzBR,EAAO,UAEuB,sCAA1BgD,EAAMQ,cAAcpC,KAA4CpB,EAAO,SAE5E,IAAIuB,GAASJ,EAAYC,EAAIpB,EAEtBuB,GAAOU,GAKbiB,EAAMhF,KAAM,gBAAiBqF,OAAQ,2BAA6BhC,EAAOS,QAAU,eAJnFkB,EAAMhF,KAAM,gBAAiBqF,OAAQ,gCAAkChC,EAAOS,QAAU,cACxFoB,EAAcxE,KAAM,YAAY,IAMjCsE,EAAMhF,KAAM,yBAA0BoF,cAMpCrF,QCvJEwF,gBAAgBC,UAAUC,iBAQhCF,gBAAgBC,UAAUC,eAAiB,WAE1C,GAAIzB,GAAQC,SAASC,KAAKwB,gBACzBC,GAAQ,CAsBT,OAnBA5F,QAAQkF,MAAOjF,KAAM,qBAAsBoF,SAE3CrF,OAAQkF,MAAOjF,KAAM,aAAcE,KAAM,SAAUC,EAAOyF,GAGzDA,EAAQC,kBAAmB,IAEpB9F,OAAQ6F,GAAU1D,QAAS,MAAO4D,SAAU,WACpB,OAA5B/F,OAAQ6F,GAAUnF,OAA6C,IAA3BV,OAAQ6F,GAAUnF,QAExDmF,EAAQC,kBAAmB7B,GAC3BjE,OAAQ6F,GAAUG,OAAQ,kCAAoC/B,EAAQ,WAEtE2B,GAAQ,KAMHA,EAOAA,GALN5F,OAAQkF,MAAO/C,QAAS,mBAAoBC,UAAWpC,OAAQkF,MAAOjF,KAAM,oCACrE2F,KHMV,SAAatD,GAEZ,GAAI2D,GAAa3D,EAAG,0BAEpB,IAAO2D,EAAW/F,OAAlB,CAIA,GAAIgG,GAAoB,WAGvB5D,EAAG4C,MAAOjF,KAAM,8BAA+BkG,KAAM7D,EAAG4C,MAAOjF,KAAM,8BAA+BQ,KAAM,2BAE1G6B,EAAG4C,MAAOkB,OAAOC,WAEjB,IAAIC,GAAWhE,EAAG4C,MAAO/C,QAAS,0BAElCG,GAAGgE,GAAWC,QAAS,wBAAyBjE,EAAG4C,SAIhDsB,EAAoB,WAEvB,GAAIF,GAAWhE,EAAG4C,MAAO/C,QAAS,2BACjCsE,EAAkBC,QAASxC,SAASC,KAAKsC,gBAE1C,IAAKA,EAAkB,CAEtB,GAAIzE,GAAOM,EAAG4C,MACbhE,EAAOc,EAAK/B,KAAM,wBAAyBQ,KAAM,QACjDQ,EAASqB,EAAG,iBAAmBpB,EAAO,MACtCyF,EAAS1F,EAAOhB,KAAM,sBAAuBS,KAE9C4B,GAAEiB,MACDxB,KAAS,OACTU,IAAQyB,SAASX,KACjB9C,MACCmD,OAAW,oCACXgD,QAAYD,GAEb9C,QAAU,SAAUC,GAGnB7C,EAAO4F,SAASxB,SAGhBrD,EAAKoE,OACLU,WAAY,WAEX9E,EAAK+E,OAAQ,aAAeC,MAAQ,WAAa,KAAMC,UAAUC,QAAS,IAAK,WAC9ElF,EAAKqD,aAKP/C,EAAGgE,GAAWC,QAAS,2BAA4BvE,KAGpDiC,MAAQ,SAAUO,EAASC,EAAQR,QAStCgC,GAAW9F,KAAM,WAEhB,GAAIgH,GAAY7E,EAAG4C,MAClBkC,EAASD,EAAUlH,KAAM,wBAG1BkH,GAAUb,UAETe,YACCC,KAAMpB,EACNqB,KAAMf,IAEPc,KAAMpB,EACNqB,KAAMf,EACN3B,MAAO,SAAW2C,GACjBL,EAAUlH,KAAM,SAAUwH,GAAI,aAAcD,MAKzCJ,EAAOlH,QACXkH,EAAO/B,SAGR/C,EAAGsC,UAAW6C,GAAI,mBAAoB,mCAAoC,WAEzE,GAAIC,GAAQpF,EAAG4C,MAAOjF,KAAM,0CAC3BiB,EAAOoB,EAAG4C,MAAO/C,QAAS,oCAAqC1B,KAAM,UACrEuB,EAAOM,EAAG,eAAiBpB,EAAO,KAEnC,IAA0B,KAArBoB,EAAGoF,GAAQhH,MACfsB,EAAKG,QAAS,0BAA2BlC,KAAM,8BAA+BkG,KAAM7D,EAAGoF,GAAQhH,WAE3F,CACJ,GAAIiH,GAAe3F,EAAKG,QAAS,0BAA2BlC,KAAM,8BAA+BQ,KAAM,yBACvGuB,GAAKG,QAAS,0BAA2BlC,KAAM,8BAA+BkG,KAAMwB,UAOnF3H,QIvJL,SAAYsC,GAUX,GAAIsF,GAAgC,SAAU7C,GAE7C,GAAIjF,GAAQiF,EAAMQ,cACjBN,EAAQ3C,EAAGxC,GAAQG,KAAM,OAEnBqC,GAAGxC,GAAQiG,SAAU,cAI3Bd,EAAQ3C,EAAGxC,GAAQG,KAAM,0BAA2B4H,KAAM,0CAA2ChB,SAErGvE,EAAGxC,GAAQgI,SAAU,YAIrB7C,EAAMH,OAAQ,SAAUC,GAIvB,GAAII,GAAgB7C,EAAGsC,SAASQ,eAC/B2C,EAAa5C,EAAczE,KAQ5B,IANAyE,EAAczE,IAAKyE,EAAc1E,KAAM,gBAAkBE,KAAM,YAAY,GAE3EoE,EAAMC,iBAENC,EAAM,GAAGS,iBAEJT,EAAM,GAAG+C,gBAAkB,CAG/B,GAAIC,GAAe3F,EAAG,0BAA2B7B,KAAM,iBACtDV,EAAQ,GAAImI,QAAQD,EAAapF,QAAS,yBAA0B,QAAW,sBAAuB,MACtGpC,IAED6B,GAAG4C,MAAOjF,KAAM,6CAA8CE,KAAM,SAAUC,EAAO+H,GAEpF,GAAK7F,EAAG6F,GAAQtB,SAASd,SAAU,UAAa,OAAO,CAEvD,IAAIqC,GAAO9F,EAAG6F,GAAQxH,KAAM,QAC3B0H,EAAQtI,EAAMQ,KAAM6H,GACpB9H,EAAQgC,EAAG6F,GAAQzH,KAEf4B,GAAG6F,GAAQG,GAAI,4BAEnBhI,EAAUgC,EAAG6F,GAAQI,KAAM,WAAgB,EAAI,GAKhD9H,EAAM4H,EAAM,GAAGxF,QAAS,KAAM,KAASvC,EAGvCP,EAAMyI,UAAY,IAInB/H,EAAKmD,OAAS,oCAEdtB,EAAEiB,MACDxB,KAAS,OACTU,IAAQyB,SAASX,KACjB9C,KAASA,EACToD,QAAU,SAAUC,GAEnB,GAAI5C,GAAOoB,EAAGxC,GAAQW,KAAM,UAC3BuB,EAAOM,EAAG,eAAiBpB,EAAO,MAAOiB,QAAS,yBAGnD8C,GAAMhF,KAAM,sBAAuBS,IAAKoD,EAASrD,KAAKmG,SAEtDvE,WAAYnB,GAEZiE,EAAczE,IAAKqH,GAAapH,KAAM,YAAY,GAGlDqB,EAAK+E,OAAQ,aAAeC,MAAQ,WAAa,MAGlD/C,MAAQ,SAAUO,EAASC,EAAQR,WAOpCkB,GAAczE,IAAKqH,GAAapH,KAAM,YAAY,MAUtD2B,GAAGsC,UAAWC,MAAO,WAGpBvC,EAAGsC,UAAW6C,GAAI,iBAAkB,mCAAoC,SAAU1C,GACjF6C,EAA+B7C,QAK7B/E,QHrCL,SAAYsC,GAGXA,EAAGsC,UAAWC,MAAO,WAEpB9D,YAGA,IAAIkF,GAAa3D,EAAG,0BAEf2D,GAAW/F,SACf+F,EAAWwB,GAAI,uBAAwB1G,YACvCkF,EAAWwB,GAAI,uBAAwB9F,cAKzCW,EAAGsC,UAAW6C,GAAI,gBAAiB,uBAAwB,WAE1D9F,UAAWW,EAAG4C,MAAOzE,KAAM,WAI5B6B,EAAGsC,UAAW6C,GAAI,iBAAkB,mCAAoC,WAEvE5H,+BAAgCqF,MAChCrE,yBAA0BqE,SAIvBlF,OItGL,IAAIiC,+BAEJ,SAAYK,GAaX,GAAImG,GAA+B,SAAU7G,EAAK8G,GAWjD,GARiB,wBAAZ9G,EAAIG,MACRH,EAAM8G,EACNA,EAAe,GAGf9G,EAAMU,EAAGV,GAAMO,QAAS,6BAGJ,GAAhBuG,EAEJpG,EAAGV,GAAM3B,KAAM,UAAWE,KAAM,SAAUC,EAAOuI,GAEhDrG,EAAGqG,GAASjI,IAAK,GAEZ4B,EAAGqG,GAAS5C,SAAU,qBAC1BzD,EAAGqG,GAASpC,QAAS,oBAKvBjE,EAAGV,GAAM3B,KAAM,0BAA2BkC,QAAS,MAAO2F,SAAU,UACpExF,EAAGV,GAAM3B,KAAM,sCAAuCkC,QAAS,MAAO2F,SAAU,cAG5E,CAEJ,GAAIc,GAAYtG,EAAGV,GAAM3B,KAAM,6BAC9B4I,EAAsBvG,EAAGV,GAAM3B,KAAM,oCAEH6B,UAA9BoC,SAAS4E,kBACb5E,SAAS4E,iBAAiBC,QAASL,OAGV,OAApBE,EAAUlI,OACdkI,EAAUlI,MAAMsI,MAAO,SAAU1I,GAAU,MAASA,GAAMyI,QAAS,WAAmCH,EAAUlI,IAAK,GAEnF,OAA9BmI,EAAoBnI,OACxBmI,EAAoBnI,MAAMsI,MAAO,SAAU1I,GAAU,MAASA,GAAMyI,QAAS,WAAmCF,EAAoBnI,IAAK,GAE1IkI,EAAU3I,KAAM,sBAAuBsH,OACvCsB,EAAoB5I,KAAM,sBAAuBsH,SAKjDqB,EAAU3I,KAAM,sBAAuBqH,OACvCuB,EAAoB5I,KAAM,sBAAuBqH,QAI7CsB,EAAU7C,SAAU,qBACxB6C,EAAUrC,QAAS,kBAGfsC,EAAoB9C,SAAU,qBAClC8C,EAAoBtC,QAAS,kBAG9BjE,EAAGV,GAAM3B,KAAM,0BAA4ByI,GAAevG,QAAS,aAAc8G,YAAa,UAC9F3G,EAAGV,GAAM3B,KAAM,0BAA2BiJ,IAAK,IAAMR,GAAevG,QAAS,MAAO2F,SAAU,UAG9FxF,EAAGV,GAAM3B,KAAM,sCAAwCyI,GAAeO,YAAa,UACnF3G,EAAGV,GAAM3B,KAAM,sCAAuCiJ,IAAK,IAAMR,GAAeZ,SAAU,UAI3FxF,EAAGV,GAAM3B,KAAM,aAAcE,KAAM,SAAUC,EAAO+H,GAE9C7F,EAAG6F,GAAQhG,QAAS,MAAO4D,SAAU,UACzCzD,EAAG6F,GAAQxH,KAAM,YAAY,GAG7B2B,EAAG6F,GAAQxH,KAAM,YAAY,GAIzB2B,EAAG6F,GAAQpC,SAAU,sBAGzBzD,EAAG6F,GAAQrH,SAGXwB,EAAG6F,GAAQxH,KAAM,eAGjB2B,EAAG6F,GAAQgB,SAAU,qBAAsBlJ,KAAM,kBAAmBU,KAAM,WAAY,MAMxF2B,EAAGV,GAAM3B,KAAM,0CAA2CE,KAAM,SAAUC,EAAOgJ,GAEhF9G,EAAG8G,GAAWb,KAAM,WAAW,KAIhCjG,EAAGV,GAAM3B,KAAM,iBAAkBE,KAAM,SAAUC,EAAOiJ,GAEvD/G,EAAG+G,GAAUA,SACZC,QAAS,WACR,MAAOhH,GAAG+G,GAAUd,KAAM,UAE3BgB,aAAc,iBACdC,UACCC,GAAI,aACJC,GAAI,mBACJC,UAAW,WAEZpC,MACCqC,SAAU,KAEXtC,MACCsC,SAAU,SAMbtH,EAAGsC,UAAW2B,QAAS,mCAAoC3E,IAaxDiI,EAA6B,SAAUjI,GAAqB,GAAhBtB,GAAgBuB,UAAA3B,OAAA,GAAA4B,SAAAD,UAAA,IAAAA,UAAA,EAG9C,yBAAZD,EAAIG,MACM,oCAAZH,EAAIG,MACNH,EAAMtB,EACNA,GAAQ,GAIRsB,EAAMU,EAAGV,GAAMO,QAAS,4BAIzB,IAAIyG,GAAYtG,EAAGV,GAAM3B,KAAM,sBAE1BK,MAAU,IACdA,EAAQsI,EAAUlI,QAGZ4B,EAAGsG,EAAUzG,QAAS,MAAO,IAAK4D,SAAU,WACxC,OAAVzF,GACAA,EAAMyI,QAAS,UAEfzG,EAAGV,GAAM3B,KAAM,+BAAgCkC,QAAS,MAAO8G,YAAa,UAK5E3G,EAAGV,GAAM3B,KAAM,+BAAgCkC,QAAS,MAAO2F,SAAU,WAYvEgC,EAAiC,WAEpCxH,EAAG,qDAAsDnC,KAAM,SAAUC,EAAO2J,GAE/E,GAAIC,IAAS,EACZC,EAAgB3H,EAAGyH,GAAS5H,QAAS,2BACrCjB,EAAO+I,EAAchK,KAAM,wBAAyBQ,KAAM,QAC1DQ,EAASqB,EAAG,iBAAmBpB,EAAO,KAIvCD,GAAOhB,KAAM,aAAcE,KAAM,SAAU+J,EAAY/B,GAEtD,IAAO7F,EAAG6F,GAAQhG,QAAS,MAAO4D,SAAU,WACtB,OAArBzD,EAAG6F,GAAQzH,MAEX,MADAsJ,IAAS,GACF,IAMyC,IAA7C/I,EAAOhB,KAAM,sBAAuBS,QACxCsJ,GAAS,GAIsC,IAA3C1H,EAAG,8BAA+B5B,OACW,IAAjDO,EAAOhB,KAAM,0BAA2BS,QACxCsJ,GAAS,GAGV1H,EAAGyH,GAASZ,SAAU,qBAAsB9D,SAEvC2E,KAAW,EAEf1H,EAAGyH,GAASI,MAAO,6EAA+EjG,SAASC,KAAKiG,aAAe,aAK/H9H,EAAGyH,GAASI,MAAO,8EAAgFjG,SAASC,KAAKiG,aAAe,gBAc/HC,EAAwC,WAG3C,GAAIpE,GAAa3D,EAAG,0BAEf2D,GAAW/F,SAEf+F,EAAWwB,GAAI,uBAAwBgB,GACvCxC,EAAWwB,GAAI,gBAAiBgB,GAEhCxC,EAAWwB,GAAI,uBAAwBoC,GACvC5D,EAAWwB,GAAI,gBAAiBoC,GAEhCvH,EAAGsC,UAAW6C,GAAI,mBAAoB,mCAAoC,WACzEqC,OAOHO,KAEA/H,EAAGsC,UAAWC,MAAO,WAGpBvC,EAAG,sBAAuBnC,KAAM,SAAUC,EAAOmG,GAChDkC,EAA8BlC,EAASjE,EAAGiE,GAAU7F,SAGrD4B,EAAG,qDAAsDnC,KAAM,SAAUC,EAAO2J,GAE/E,GACCE,GAAgB3H,EAAGyH,GAAS5H,QAAS,2BACrCjB,EAAO+I,EAAchK,KAAM,wBAAyBQ,KAAM,QAC1DQ,EAASqB,EAAG,iBAAmBpB,EAAO,KAEtCrB,gCAAgCoB,GAChCJ,yBAA0BI,KAI5B6I,IAGAxH,EAAGsC,UAAW6C,GAAI,SAAU,qBAAsB,WAEjDgB,EAA8BnG,EAAG4C,MAAQ5C,EAAG4C,MAAOxE,SAMpD4B,EAAGsC,UAAW6C,GAAI,SAAU,sBAAuB,WAElD,GAAInH,GAAQgC,EAAG4C,MAAOxE,MACrB4J,EAAY,EAcb,IAZe,OAAVhK,IAGJgK,EAAYhK,EAAMiK,OAAQ,SAAUnK,GACnC,MAAO6B,2BAA0B8G,QAAS3I,GAAU,IAIrD6B,0BAA4B3B,GAIX,OAAbgK,EAEJhI,EAAG4C,MAAOxE,IAAK,OAEV4B,EAAG4C,MAAOa,SAAU,qBACxBzD,EAAG4C,MAAOqB,QAAS,sBAIhB,IAAe,OAAVjG,GACPA,EAAMJ,OAAS,GAChBI,EAAMyI,QAAS,UAAe,CAG/B,IAAM,GAAIyB,KAAOlK,GACK,OAAhBA,EAAOkK,IACXlK,EAAMmK,OAAQD,EAAK,EAIrBlI,GAAG4C,MAAOxE,IAAKJ,GAEVgC,EAAG4C,MAAOa,SAAU,qBACxBzD,EAAG4C,MAAOqB,QAAS,kBAKrBsD,EAA4BvH,EAAG4C,MAAQ5C,EAAG4C,MAAOxE,SAIlD4B,EAAGsC,UAAW6C,GAAI,mCAAoC,SAAU1C,EAAOnD,GAEtEiI,EAA4B9E,EAAOnD,QAMjC5B,QC3WL,SAAasC,GAUZA,EAAEoI,mBAAqB,SAAUC,GAEhCA,EAAQC,WAAaD,EAAQC,YAAe,mBAC5CD,EAAQE,cAAgBF,EAAQE,eAAiB,2CACjDF,EAAQG,SAAWH,EAAQG,UAAY,WAAapI,OAAOC,SAASoI,UACpEJ,EAAQK,YAAcL,EAAQK,cAAe,EAC7CL,EAAQM,UAAYN,EAAQM,WAAa,MAEzC,IAAIC,GAAOhG,IACXgG,GAAKC,aAAezI,OAAO0I,KAAMT,EAAQU,KAAMV,EAAQC,WAAYD,EAAQE,eAC3EK,EAAKI,eAAiBC,YAAa,WAElC,IAEML,EAAKC,aAAaxI,SAASC,KAAKmG,QAAS4B,EAAQK,mBACrDE,EAAKC,aAAaxI,SAASC,KAAKmG,QAAS,gBACzCmC,EAAKC,aAAaxI,SAASC,KAAKmG,QAAS,6BAGzCyC,cAAeN,EAAKI,gBAIpBX,EAAQK,YAAcE,EAAKC,aAAaxI,SAASC,KAAKC,QAAS,UAAW,4BAAmC8H,EAAQM,WAGrHN,EAAQG,SAAUH,EAAQK,aAE1BE,EAAKC,aAAaM,SAGTP,EAAKC,aAAaxI,SAASC,KAAKmG,QAAS,8BAElDmC,EAAKC,aAAaM,QAKpB,MAAQC,MAIN,MAIJpJ,EAAGsC,UAAWC,MAAO,WAEfvC,EAAG,uBAAwBpC,OAAS,GAExCoC,EAAG,uBAAwBmF,GAAI,QAAS,SAAU1C,GAGjDA,EAAMC,gBAON,KALA,GAECqD,GAFGsD,EAAWrJ,EAAG4C,MAAOvE,KAAM,QAC9BZ,EAAQ,yBAERiL,EAAc,GAEgC,QAArC3C,EAAQtI,EAAMQ,KAAMoL,KAEX,iBAAbtD,EAAM,KAEX2C,EAAcY,mBAAoBvD,EAAM,IAKzC,IAAIwD,GAAsC/J,QAArBY,OAAOoJ,WAA0BpJ,OAAOoJ,WAAaC,OAAOC,KAChFC,EAAoCnK,QAApBY,OAAOwJ,UAAyBxJ,OAAOwJ,UAAYH,OAAOI,IAGvEC,EAAa,IAChBC,EAAc,IACdC,EAAe5J,OAAO6J,WAAa7J,OAAO6J,WAAa3H,SAAS4H,gBAAgBC,YAAc7H,SAAS4H,gBAAgBC,YAAcV,OAAOW,MAC5IC,EAAgBjK,OAAOkK,YAAclK,OAAOkK,YAAchI,SAAS4H,gBAAgBK,aAAejI,SAAS4H,gBAAgBK,aAAed,OAAOe,OAE9Id,EAAWM,EAAe,EAAQF,EAAa,EAAQP,EACvDM,EAAUQ,EAAgB,EAAQN,EAAc,EAAQJ,CAEhD3J,GAAEoI,oBACbW,KAAMM,EACNX,YAAaA,EACbH,cAAe,6BAA+BuB,EAAa,WAAaC,EAAc,QAAUF,EAAM,SAAWH,EACjHf,UAAW3I,EAAG4C,MAAOzE,KAAM,cAC3BqK,SAAU,SAAUiC,GACnBrK,OAAOC,SAAWoK,UAUnB/M","file":"admin.js","sourcesContent":["'use strict';\n\n(function ($) {\n\n\t/**\n  * Sends a Slack Team Invite via Ajax\n  * \n  * @param\t\t{integer} id   EDD_Customer ID or FES_Vendor ID\n  * @param \t\t{string}  type 'customer' or 'vendor'\n  *                         \n  * @since\t\t1.1.0\n  * @return\t\tobject\t  JSON\n  */\n\tvar sendInvite = function sendInvite(id, type) {\n\n\t\tvar output,\n\t\t    noAsync = {};\n\n\t\t// This forces the AJAX to complete on our time rather than its own\n\t\t// This way we can reliably have its results returned before executing another action in sequence rather than via a promise\n\t\tnoAsync = function (id, type) {\n\n\t\t\tvar result = {};\n\t\t\t$.ajax({\n\t\t\t\tasync: false,\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: location.origin + ajaxurl,\n\t\t\t\tdata: {\n\t\t\t\t\tid: id,\n\t\t\t\t\ttype: type,\n\t\t\t\t\t_ajax_nonce: $('#edd_slack_team_invite_nonce').val(),\n\t\t\t\t\taction: 'edd_slack_app_team_invite'\n\t\t\t\t},\n\t\t\t\tsuccess: function success(response) {\n\n\t\t\t\t\tvar message = '';\n\n\t\t\t\t\t// There's an Error\n\t\t\t\t\tif (response.ok === false) {\n\n\t\t\t\t\t\tswitch (response.error) {\n\t\t\t\t\t\t\tcase 'channel_not_found':\n\t\t\t\t\t\t\t\tmessage = eddSlack.i18n.slackInvite.channel_not_found;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'no_perms':\n\t\t\t\t\t\t\t\tmessage = eddSlack.i18n.slackInvite.no_perms;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'already_in_team':\n\t\t\t\t\t\t\t\tmessage = eddSlack.i18n.slackInvite.already_in_team;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tmessage = response.error;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmessage = eddSlack.i18n.slackInvite[type + '_invite_successful'];\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = {\n\t\t\t\t\t\tok: response.ok,\n\t\t\t\t\t\tmessage: message\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\terror: function error(request, status, _error) {\n\t\t\t\t\tconsole.error(request.responseText);\n\t\t\t\t\tconsole.error(_error);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn result;\n\t\t}(id, type);\n\n\t\toutput = noAsync;\n\n\t\treturn output;\n\t};\n\n\t/**\n  * Grabs GET Parameter from the URL\n  * \n  * @param\t\t{string} variable Variable Name\n  * @param \t\t{string} url      URL. Defaults to the current URL\n  *                            \n  * @since\t\t1.1.0\n  * @return \t\t{string} Parameter Value\n  */\n\tfunction getUrlParameter(variable) {\n\t\tvar url = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\n\t\tif (url === undefined) {\n\t\t\turl = window.location.href;\n\t\t}\n\n\t\t// Remove Hash from URL\n\t\turl = url.replace(/#.*$/, '');\n\n\t\tvar vars = url.split('&');\n\n\t\tfor (var i = 0; i < vars.length; i++) {\n\n\t\t\tvar pair = vars[i].split('=');\n\n\t\t\tif (pair[0] == variable) {\n\t\t\t\treturn pair[1];\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t$(document).ready(function () {\n\n\t\t$('#edd_slack_team_customer_invite_form, #edd_slack_team_vendor_invite_form').submit(function (event) {\n\n\t\t\tevent.preventDefault();\n\n\t\t\tvar $form = $(this),\n\t\t\t    $submitButton = $(document.activeElement);\n\n\t\t\t$submitButton.attr('disabled', true);\n\n\t\t\t// Copy EDD's notice for AJAX sub-form submission because it is awesome\n\t\t\t$form.find('.notice-wrap').remove();\n\t\t\t$form.append('<div class=\"notice-wrap\"><span class=\"spinner is-active\"></span></div>');\n\n\t\t\tvar id = getUrlParameter('id'),\n\t\t\t    type = 'customer';\n\n\t\t\tif (event.currentTarget.id == 'edd_slack_team_vendor_invite_form') type = 'vendor';\n\n\t\t\tvar result = sendInvite(id, type);\n\n\t\t\tif (!result.ok) {\n\t\t\t\t$form.find('.notice-wrap').append('<div class=\"update error\"><p>' + result.message + '</p></div>');\n\t\t\t\t$submitButton.attr('disabled', false);\n\t\t\t} else {\n\t\t\t\t$form.find('.notice-wrap').append('<div class=\"updated\"><p>' + result.message + '</p></div>');\n\t\t\t}\n\n\t\t\t$form.find('.notice-wrap .spinner').remove();\n\t\t});\n\t});\n})(jQuery);\n'use strict';\n\nif (!HTMLFormElement.prototype.reportValidity) {\n\n\t/**\n  * Wait, people use IE and Safari outside of downloading Chrome?\n  * \n  * @since\t  1.0.0\n  * @return\t  void\n  */\n\tHTMLFormElement.prototype.reportValidity = function () {\n\n\t\tvar error = eddSlack.i18n.validationError,\n\t\t    valid = true;\n\n\t\t// Remove all old Validation Errors\n\t\tjQuery(this).find('.validation-error').remove();\n\n\t\tjQuery(this).find('.required').each(function (index, element) {\n\n\t\t\t// Reset Custom Validity Message\n\t\t\telement.setCustomValidity('');\n\n\t\t\tif (!jQuery(element).closest('td').hasClass('hidden') && (jQuery(element).val() === null || jQuery(element).val() == '')) {\n\n\t\t\t\telement.setCustomValidity(error);\n\t\t\t\tjQuery(element).before('<span class=\"validation-error\">' + error + '</span>');\n\n\t\t\t\tvalid = false;\n\t\t\t}\n\t\t});\n\n\t\tif (!valid) {\n\n\t\t\tjQuery(this).closest('.reveal-overlay').scrollTop(jQuery(this).find('.validation-error:first-of-type'));\n\t\t\treturn valid;\n\t\t}\n\n\t\treturn valid;\n\t};\n};\n'use strict';\n\n// Initialize special fields if they exist\nfunction init_edd_repeater_colorpickers(modal) {\n\n\tvar regex = /value=\"(#(?:[0-9a-f]{3}){1,2})\"/i;\n\n\t// Only try to run if there are any Color Pickers within an EDD Repeater\n\tif (jQuery(modal).find('.edd-color-picker').length > 0) {\n\n\t\t// Hit each colorpicker individually to ensure its settings are properly used\n\t\tjQuery(modal).find('.edd-color-picker').each(function (index, colorPicker) {\n\n\t\t\t// Value exists in HTML but is inaccessable via JavaScript. No idea why.\n\t\t\tvar value = regex.exec(jQuery(colorPicker)[0].outerHTML);\n\n\t\t\tif (value !== null) {\n\t\t\t\tvalue = value[1]; // Set to Regex Match\n\t\t\t} else {\n\t\t\t\tvalue = jQuery(colorPicker).data('defaultColor'); // Set to default\n\t\t\t}\n\n\t\t\tjQuery(colorPicker).val(value).attr('value', value).wpColorPicker();\n\t\t});\n\t}\n}\n\nfunction init_edd_repeater_chosen(modal) {\n\n\t// Only try to run if there are any Chosen Fields within an EDD Repeater\n\tif (jQuery(modal).find('select.edd-slack-chosen').length) {\n\n\t\t// Init Chosen Fields as a Glob per-row\n\t\tjQuery(modal).find('.edd-slack-chosen').chosen();\n\t}\n}\n\n// Repeaters\n(function ($) {\n\n\tvar $repeaters = $('[data-edd-rbm-repeater]');\n\n\tif (!$repeaters.length) {\n\t\treturn;\n\t}\n\n\tvar edd_repeater_show = function edd_repeater_show() {\n\n\t\t// Hide current title for new item and show default title\n\t\t$(this).find('.repeater-header div.title').html($(this).find('.repeater-header div.title').data('repeater-default-title'));\n\n\t\t$(this).stop().slideDown();\n\n\t\tvar repeater = $(this).closest('[data-edd-rbm-repeater]');\n\n\t\t$(repeater).trigger('edd-rbm-repeater-add', [$(this)]);\n\t};\n\n\tvar edd_repeater_hide = function edd_repeater_hide() {\n\n\t\tvar repeater = $(this).closest('[data-edd-rbm-repeater]'),\n\t\t    confirmDeletion = confirm(eddSlack.i18n.confirmDeletion);\n\n\t\tif (confirmDeletion) {\n\n\t\t\tvar $row = $(this),\n\t\t\t    uuid = $row.find('[data-repeater-edit]').data('open'),\n\t\t\t    $modal = $('[data-reveal=\"' + uuid + '\"]'),\n\t\t\t    postID = $modal.find('.edd-slack-post-id').val();\n\n\t\t\t$.ajax({\n\t\t\t\t'type': 'POST',\n\t\t\t\t'url': eddSlack.ajax,\n\t\t\t\t'data': {\n\t\t\t\t\t'action': 'delete_edd_rbm_slack_notification',\n\t\t\t\t\t'post_id': postID\n\t\t\t\t},\n\t\t\t\tsuccess: function success(response) {\n\n\t\t\t\t\t// Remove whole DOM tree for the Modal.\n\t\t\t\t\t$modal.parent().remove();\n\n\t\t\t\t\t// Remove DOM Tree for the Notification \"Header\"\n\t\t\t\t\t$row.stop();\n\t\t\t\t\tsetTimeout(function () {\n\n\t\t\t\t\t\t$row.effect('highlight', { color: '#FFBABA' }, 300).dequeue().slideUp(300, function () {\n\t\t\t\t\t\t\t$row.remove();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\t$(repeater).trigger('edd-rbm-repeater-remove', [$row]);\n\t\t\t\t},\n\t\t\t\terror: function error(request, status, _error) {}\n\t\t\t});\n\t\t}\n\t};\n\n\t$repeaters.each(function () {\n\n\t\tvar $repeater = $(this),\n\t\t    $dummy = $repeater.find('[data-repeater-dummy]');\n\n\t\t// Repeater\n\t\t$repeater.repeater({\n\n\t\t\trepeaters: [{\n\t\t\t\tshow: edd_repeater_show,\n\t\t\t\thide: edd_repeater_hide\n\t\t\t}],\n\t\t\tshow: edd_repeater_show,\n\t\t\thide: edd_repeater_hide,\n\t\t\tready: function ready(setIndexes) {\n\t\t\t\t$repeater.find('tbody').on('sortupdate', setIndexes);\n\t\t\t}\n\n\t\t});\n\n\t\tif ($dummy.length) {\n\t\t\t$dummy.remove();\n\t\t}\n\n\t\t$(document).on('closed.zf.reveal', '.edd-rbm-repeater-content.reveal', function () {\n\n\t\t\tvar title = $(this).find('td:first-of-type input[type!=\"hidden\"]'),\n\t\t\t    uuid = $(this).closest('.edd-rbm-repeater-content.reveal').data('reveal'),\n\t\t\t    $row = $('[data-open=\"' + uuid + '\"]');\n\n\t\t\tif ($(title).val() !== '') {\n\t\t\t\t$row.closest('.edd-rbm-repeater-item').find('.repeater-header div.title').html($(title).val());\n\t\t\t} else {\n\t\t\t\tvar defaultValue = $row.closest('.edd-rbm-repeater-item').find('.repeater-header div.title').data('repeater-default-title');\n\t\t\t\t$row.closest('.edd-rbm-repeater-item').find('.repeater-header div.title').html(defaultValue);\n\t\t\t}\n\t\t});\n\t});\n})(jQuery);\n'use strict';\n\n(function ($) {\n\n\t/**\n  * Submit the Form for Creating/Updating Notifications via their Modals\n  * \n  * @param\t  \t{object}  event JavaScript Event Object\n  *\t\t\t\t\t\t\t  \n  * @since\t  \t1.0.0\n  * @returns\t \t{boolean} Validity of Form\n  */\n\tvar attachNotificationSubmitEvent = function attachNotificationSubmitEvent(event) {\n\n\t\tvar modal = event.currentTarget,\n\t\t    $form = $(modal).find('form');\n\n\t\tif (!$(modal).hasClass('has-form')) {\n\n\t\t\t// We need to create the Form\n\t\t\t// \"novalidate\" so that HTML5 doesn't try to take over before we can do our thing\n\t\t\t$form = $(modal).find('.edd-rbm-repeater-form').wrap('<form method=\"POST\" novalidate></form>').parent();\n\n\t\t\t$(modal).addClass('has-form');\n\n\t\t\t// Normally HTML doesn't like us having nested Forms, so we force it like this\n\t\t\t// By the time the Modal opens and this code runs, the Form isn't nested anymore\n\t\t\t$form.submit(function (event) {\n\n\t\t\t\t// This captures the Submit button\n\t\t\t\t// activeElement ensures it is the correct one in the event more Submit Buttons get added for some reason\n\t\t\t\tvar $submitButton = $(document.activeElement),\n\t\t\t\t    submitText = $submitButton.val();\n\n\t\t\t\t$submitButton.val($submitButton.data('saving_text')).attr('disabled', true);\n\n\t\t\t\tevent.preventDefault(); // Don't submit the form via PHP\n\n\t\t\t\t$form[0].reportValidity(); // Report Validity via HTML5 stuff\n\n\t\t\t\tif ($form[0].checkValidity()) {\n\t\t\t\t\t// Only run our code if we've got a Valid Form\n\n\t\t\t\t\t// Used to construct HTML Name Attribute\n\t\t\t\t\tvar repeaterList = $('.edd-rbm-repeater-list').data('repeater-list'),\n\t\t\t\t\t    regex = new RegExp(repeaterList.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&') + '\\\\[\\\\d\\\\]\\\\[(.*)\\\\]', 'gi'),\n\t\t\t\t\t    data = {};\n\n\t\t\t\t\t$(this).find('.edd-slack-field:not( .chosen-container )').each(function (index, field) {\n\n\t\t\t\t\t\tif ($(field).parent().hasClass('hidden')) return true;\n\n\t\t\t\t\t\tvar name = $(field).attr('name'),\n\t\t\t\t\t\t    match = regex.exec(name),\n\t\t\t\t\t\t    value = $(field).val();\n\n\t\t\t\t\t\tif ($(field).is('input[type=\"checkbox\"]')) {\n\n\t\t\t\t\t\t\tvalue = $(field).prop('checked') ? 1 : 0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Checkboxes don't place nice with my regex and I'm not rewriting it\n\t\t\t\t\t\tdata[match[1].replace('][', '')] = value;\n\n\t\t\t\t\t\t// Reset Interal Pointer for Regex\n\t\t\t\t\t\tregex.lastIndex = 0;\n\t\t\t\t\t});\n\n\t\t\t\t\tdata.action = 'insert_edd_rbm_slack_notification';\n\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t'type': 'POST',\n\t\t\t\t\t\t'url': eddSlack.ajax,\n\t\t\t\t\t\t'data': data,\n\t\t\t\t\t\tsuccess: function success(response) {\n\n\t\t\t\t\t\t\tvar uuid = $(modal).data('reveal'),\n\t\t\t\t\t\t\t    $row = $('[data-open=\"' + uuid + '\"]').closest('.edd-rbm-repeater-item');\n\n\t\t\t\t\t\t\t// If the Modal started as a New Notification, we need to update the Post ID value to ensure it can be updated\n\t\t\t\t\t\t\t$form.find('.edd-slack-post-id').val(response.data.post_id);\n\n\t\t\t\t\t\t\tcloseModal(uuid);\n\n\t\t\t\t\t\t\t$submitButton.val(submitText).attr('disabled', false);\n\n\t\t\t\t\t\t\t// Highlight Green\n\t\t\t\t\t\t\t$row.effect('highlight', { color: '#DFF2BF' }, 1000);\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: function error(request, status, _error) {}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\n\t\t\t\t\t$submitButton.val(submitText).attr('disabled', false);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\t$(document).ready(function () {\n\n\t\t// When a Modal opens, attach the Form Submission Event\n\t\t$(document).on('open.zf.reveal', '.edd-rbm-repeater-content.reveal', function (event) {\n\t\t\tattachNotificationSubmitEvent(event);\n\t\t});\n\t});\n})(jQuery);\n'use strict';\n\n/**\n * Normally something like this would be handled by $( document ).foundation(), but doing it manually lets us call this whenever we'd like and dynamically create Button->Modal associations\n * \n * @since\t  1.0.0\n * @return\t  void\n */\nfunction initModals() {\n\n\tjQuery('.edd-rbm-repeater .edd-rbm-repeater-item').each(function (index, item) {\n\n\t\tvar $modal = jQuery(item).find('.edd-rbm-repeater-content.reveal');\n\n\t\tif ($modal.attr('data-reveal') !== '') return true;\n\n\t\t// Copy of how Foundation creates UUIDs\n\t\tvar uuid = Math.round(Math.pow(36, 7) - Math.random() * Math.pow(36, 6)).toString(36).slice(1) + '-reveal';\n\n\t\t$modal.attr('data-reveal', uuid);\n\n\t\tvar $editButton = jQuery(item).find('input[data-repeater-edit]').attr('data-open', uuid);\n\n\t\t$modal = new Foundation.Reveal($modal);\n\t});\n}\n\n/**\n * Opens a Modal because Foundation isn't able to do things quite how I need\n * \n * @param\t  {Event|String} uuid Either the Event from creating a new Row or a UUID\n * @param\t  {object}\t  row  DOM Object of the Row if called from an Event\n *\t\t\t\t\t\t\t\n * @since\t  1.0.0\n * @return\t  void\n */\nfunction openModal(uuid) {\n\tvar row = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\n\t// Handle newly created Rows\n\tif (uuid.type == 'edd-rbm-repeater-add') {\n\n\t\tvar $row = jQuery(row);\n\n\t\tuuid = $row.find('input[data-repeater-edit]').data('open');\n\t}\n\n\tvar $modal = jQuery('[data-reveal=\"' + uuid + '\"]');\n\n\t// Set the Selected Downloads Array to the value of the Downloads Field within the now open Modal\n\teddSlackSelectedDownloads = $modal.find('.edd-slack-download').val();\n\n\t// If there's no value, set to an empty Array\n\teddSlackSelectedDownloads = eddSlackSelectedDownloads === null ? [] : eddSlackSelectedDownloads;\n\n\t$modal.foundation('open');\n\n\t// Ensure we're looking at the top of the Modal\n\t$modal.closest('.reveal-overlay').scrollTop(0);\n}\n\n/**\n * Closes a Modal by its UUID\n * \n * @param\t  {string} uuid UUID of the Modal\n *\t\t\t\t\t  \n * @since\t  1.0.0\n * @return\t  void\n */\nfunction closeModal(uuid) {\n\n\tvar $modal = jQuery('[data-reveal=\"' + uuid + '\"]');\n\n\t$modal.foundation('close');\n}\n\n(function ($) {\n\t'use strict';\n\n\t$(document).ready(function () {\n\n\t\tinitModals();\n\n\t\t// This JavaScript only loads on our custom Page, so we're fine doing this\n\t\tvar $repeaters = $('[data-edd-rbm-repeater]');\n\n\t\tif ($repeaters.length) {\n\t\t\t$repeaters.on('edd-rbm-repeater-add', initModals);\n\t\t\t$repeaters.on('edd-rbm-repeater-add', openModal);\n\t\t}\n\t});\n\n\t$(document).on('click touched', '[data-repeater-edit]', function () {\n\n\t\topenModal($(this).data('open'));\n\t});\n\n\t$(document).on('open.zf.reveal', '.edd-rbm-repeater-content.reveal', function () {\n\n\t\tinit_edd_repeater_colorpickers(this);\n\t\tinit_edd_repeater_chosen(this);\n\t});\n})(jQuery);\n'use strict';\n\n/**\n * Global, overwritten on Modal open. This allows us to reliably determine the most recently selected <option>\n * Oddly there's no good way to do this\n *\t\t\t\t\t\t\t\t\t \n * @since\t  1.1.0\n */\nvar eddSlackSelectedDownloads = [];\n\n(function ($) {\n\t'use strict';\n\n\t/**\n  * Conditionally Hide/Show Fields based on the selected Trigger\n  * This also adds some basic Form Validation because EDD doesn't support Required Fields\n  * \n  * @param\t  {Event|String}  row\t\t  Either the Event from creating a new Row or the Slack Trigger Field\n  * @param\t  {Object|string} option_class The new Row (unused) or the Value of the Slack Trigger Field\n  *\t\t\t\t\t\t\t\t\t \n  * @since\t  1.0.0\n  * @return\t  void\n  */\n\n\tvar edd_slack_conditional_fields = function edd_slack_conditional_fields(row, option_class) {\n\n\t\t// Handle newly created Rows\n\t\tif (row.type == 'edd-rbm-repeater-add') {\n\t\t\trow = option_class;\n\t\t\toption_class = 0;\n\t\t} else {\n\t\t\trow = $(row).closest('.edd-rbm-repeater-content');\n\t\t}\n\n\t\tif (option_class == 0) {\n\n\t\t\t$(row).find('select').each(function (index, select) {\n\n\t\t\t\t$(select).val(0);\n\n\t\t\t\tif ($(select).hasClass('edd-slack-chosen')) {\n\t\t\t\t\t$(select).trigger('chosen:updated');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$(row).find('.edd-slack-conditional').closest('td').addClass('hidden');\n\t\t\t$(row).find('.edd-slack-replacement-instruction').closest('td').addClass('hidden');\n\t\t} else {\n\n\t\t\tvar $download = $(row).find('select.edd-slack-download'),\n\t\t\t    $downloadExclusions = $(row).find('select.edd-slack-exclude-download');\n\n\t\t\tif (eddSlack.variantExclusion !== undefined && eddSlack.variantExclusion.indexOf(option_class) > -1) {\n\n\t\t\t\t// Reset value if it is set to a variant\n\t\t\t\tif ($download.val() !== null && $download.val().every(function (value) {\n\t\t\t\t\treturn value.indexOf('-') > -1 ? true : false;\n\t\t\t\t})) $download.val(0);\n\n\t\t\t\tif ($downloadExclusions.val() !== null && $downloadExclusions.val().every(function (value) {\n\t\t\t\t\treturn value.indexOf('-') > -1 ? true : false;\n\t\t\t\t})) $downloadExclusions.val(0);\n\n\t\t\t\t$download.find('option[value*=\"-\"]').hide();\n\t\t\t\t$downloadExclusions.find('option[value*=\"-\"]').hide();\n\t\t\t} else {\n\n\t\t\t\t$download.find('option[value*=\"-\"]').show();\n\t\t\t\t$downloadExclusions.find('option[value*=\"-\"]').show();\n\t\t\t}\n\n\t\t\tif ($download.hasClass('edd-slack-chosen')) {\n\t\t\t\t$download.trigger('chosen:updated');\n\t\t\t}\n\n\t\t\tif ($downloadExclusions.hasClass('edd-slack-chosen')) {\n\t\t\t\t$downloadExclusions.trigger('chosen:updated');\n\t\t\t}\n\n\t\t\t$(row).find('.edd-slack-conditional.' + option_class).closest('td.hidden').removeClass('hidden');\n\t\t\t$(row).find('.edd-slack-conditional').not('.' + option_class).closest('td').addClass('hidden');\n\n\t\t\t// Also do this for the Replacement Hints\n\t\t\t$(row).find('.edd-slack-replacement-instruction.' + option_class).removeClass('hidden');\n\t\t\t$(row).find('.edd-slack-replacement-instruction').not('.' + option_class).addClass('hidden');\n\t\t}\n\n\t\t$(row).find('.required').each(function (index, field) {\n\n\t\t\tif ($(field).closest('td').hasClass('hidden')) {\n\t\t\t\t$(field).attr('required', false);\n\t\t\t} else {\n\t\t\t\t$(field).attr('required', true);\n\t\t\t}\n\n\t\t\t// Fix Tab Ordering Bug \n\t\t\tif ($(field).hasClass('edd-slack-chosen')) {\n\n\t\t\t\t// Ensure the Chosen Container has been built\n\t\t\t\t$(field).chosen();\n\n\t\t\t\t// No Tab index for the \"hidden\" Select field\n\t\t\t\t$(field).attr('tabindex', -1);\n\n\t\t\t\t// Why would you be unable to tab into it by default?!?!\n\t\t\t\t$(field).siblings('.chosen-container').find('.chosen-single').attr('tabindex', 0);\n\t\t\t}\n\t\t});\n\n\t\t$(row).find('input[type=\"checkbox\"].default-checked').each(function (index, checkbox) {\n\n\t\t\t$(checkbox).prop('checked', true);\n\t\t});\n\n\t\t$(row).find('.edd-help-tip').each(function (index, tooltip) {\n\n\t\t\t$(tooltip).tooltip({\n\t\t\t\tcontent: function content() {\n\t\t\t\t\treturn $(tooltip).prop('title');\n\t\t\t\t},\n\t\t\t\ttooltipClass: 'edd-ui-tooltip',\n\t\t\t\tposition: {\n\t\t\t\t\tmy: 'center top',\n\t\t\t\t\tat: 'center bottom+10',\n\t\t\t\t\tcollision: 'flipfit'\n\t\t\t\t},\n\t\t\t\thide: {\n\t\t\t\t\tduration: 200\n\t\t\t\t},\n\t\t\t\tshow: {\n\t\t\t\t\tduration: 200\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t$(document).trigger('edd-slack-conditional-fields-set', row);\n\t};\n\n\t/**\n  * Conditionally Hide/Show the Download Exclusion Field based on the selected Download(s)\n  * \n  * @param\t  {Event|String}  row\t\tEither the Event from creating a new Row or the Download Exclusions Field\n  * @param\t  {Object|string} value\t\tThe new Row (unused) or the Value of the Download(s)\n  *\t\t\t\t\t\t\t\t\t \n  * @since\t  1.1.0\n  * @return\t  void\n  */\n\tvar edd_slack_exclusion_toggle = function edd_slack_exclusion_toggle(row) {\n\t\tvar value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n\n\t\t// Handle newly created Rows\n\t\tif (row.type == 'edd-rbm-repeater-add' || row.type == 'edd-slack-conditional-fields-set') {\n\t\t\trow = value;\n\t\t\tvalue = false;\n\t\t} else {\n\n\t\t\trow = $(row).closest('.edd-rbm-repeater-content');\n\t\t}\n\n\t\tvar $download = $(row).find('.edd-slack-download');\n\n\t\tif (value === false) {\n\t\t\tvalue = $download.val();\n\t\t}\n\n\t\tif (!$($download.closest('td')[0]).hasClass('hidden') && value !== null && value.indexOf('all') > -1) {\n\n\t\t\t$(row).find('.edd-slack-exclude-download').closest('td').removeClass('hidden');\n\t\t} else {\n\n\t\t\t$(row).find('.edd-slack-exclude-download').closest('td').addClass('hidden');\n\t\t}\n\t};\n\n\t/**\n  * Add Notification Status Indiciators to show whether or not a Notification is \"active\"\n  * \n  * @since\t  1.0.0\n  * @return\t  void\n  */\n\tvar eddSlackNotificationIndicators = function eddSlackNotificationIndicators() {\n\n\t\t$('.repeater-header div[data-repeater-default-title]').each(function (index, header) {\n\n\t\t\tvar active = true,\n\t\t\t    $repeaterItem = $(header).closest('div[data-repeater-item]'),\n\t\t\t    uuid = $repeaterItem.find('[data-repeater-edit]').data('open'),\n\t\t\t    $modal = $('[data-reveal=\"' + uuid + '\"]');\n\n\t\t\t// Ensure Required Fields are Filled Out\n\t\t\t// This should only apply to Non-Saved Notifications, but if someone gets cheeky and attempts to get around my form validation this will tell them that they dun goof'd\n\t\t\t$modal.find('.required').each(function (valueIndex, field) {\n\n\t\t\t\tif (!$(field).closest('td').hasClass('hidden') && $(field).val() === null) {\n\t\t\t\t\tactive = false;\n\t\t\t\t\treturn false; // Break out of execution, we already know we're invalid\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// If we're not saved yet\n\t\t\tif ($modal.find('.edd-slack-post-id').val() == '') {\n\t\t\t\tactive = false;\n\t\t\t}\n\n\t\t\t// Check for a Webhook URL\n\t\t\tif ($('.edd-slack-webhook-default').val() == '' && $modal.find('.edd-slack-webhook-url').val() == '') {\n\t\t\t\tactive = false;\n\t\t\t}\n\n\t\t\t$(header).siblings('.status-indicator').remove();\n\n\t\t\tif (active === true) {\n\n\t\t\t\t$(header).after('<span class=\"active status-indicator dashicons dashicons-yes\" aria-label=\"' + eddSlack.i18n.inactiveText + '\"></span>');\n\t\t\t} else {\n\n\t\t\t\t$(header).after('<span class=\"inactive status-indicator dashicons dashicons-no\" aria-label=\"' + eddSlack.i18n.inactiveText + '\"></span>');\n\t\t\t}\n\t\t});\n\t};\n\n\t/**\n  * Attach Event Handlers for things outside of basic Repeater-scope\n  * \n  * @since\t  1.0.0\n  * @return\t  void\n  */\n\tvar init_edd_slack_repeater_functionality = function init_edd_slack_repeater_functionality() {\n\n\t\t// This JavaScript only loads on our custom Page, so we're fine doing this\n\t\tvar $repeaters = $('[data-edd-rbm-repeater]');\n\n\t\tif ($repeaters.length) {\n\n\t\t\t$repeaters.on('edd-rbm-repeater-add', edd_slack_conditional_fields);\n\t\t\t$repeaters.on('repeater-show', edd_slack_conditional_fields);\n\n\t\t\t$repeaters.on('edd-rbm-repeater-add', edd_slack_exclusion_toggle);\n\t\t\t$repeaters.on('repeater-show', edd_slack_exclusion_toggle);\n\n\t\t\t$(document).on('closed.zf.reveal', '.edd-rbm-repeater-content.reveal', function () {\n\t\t\t\teddSlackNotificationIndicators();\n\t\t\t});\n\t\t}\n\t};\n\n\tinit_edd_slack_repeater_functionality();\n\n\t$(document).ready(function () {\n\n\t\t// Handle conditional fields on Page Load\n\t\t$('.edd-slack-trigger').each(function (index, trigger) {\n\t\t\tedd_slack_conditional_fields(trigger, $(trigger).val());\n\t\t});\n\n\t\t$('.repeater-header div[data-repeater-default-title]').each(function (index, header) {\n\n\t\t\tvar active = true,\n\t\t\t    $repeaterItem = $(header).closest('div[data-repeater-item]'),\n\t\t\t    uuid = $repeaterItem.find('[data-repeater-edit]').data('open'),\n\t\t\t    $modal = $('[data-reveal=\"' + uuid + '\"]');\n\n\t\t\tinit_edd_repeater_colorpickers($modal);\n\t\t\tinit_edd_repeater_chosen($modal);\n\t\t});\n\n\t\teddSlackNotificationIndicators();\n\n\t\t// And toggle them on Change\n\t\t$(document).on('change', '.edd-slack-trigger', function () {\n\n\t\t\tedd_slack_conditional_fields($(this), $(this).val());\n\t\t});\n\n\t\t// Conditionally hide/show the Downloads Exclusion Field.\n\t\t// This also ensures if All Downloads is chosen, that ONLY All Downloads can be chosen\n\t\t$(document).on('change', '.edd-slack-download', function () {\n\n\t\t\tvar value = $(this).val(),\n\t\t\t    justAdded = '';\n\n\t\t\tif (value !== null) {\n\n\t\t\t\t// Array Diff\n\t\t\t\tjustAdded = value.filter(function (index) {\n\t\t\t\t\treturn eddSlackSelectedDownloads.indexOf(index) < 0;\n\t\t\t\t});\n\n\t\t\t\t// Update Selected Downloads\n\t\t\t\teddSlackSelectedDownloads = value;\n\t\t\t}\n\n\t\t\tif (justAdded == 'all') {\n\n\t\t\t\t$(this).val('all');\n\n\t\t\t\tif ($(this).hasClass('edd-slack-chosen')) {\n\t\t\t\t\t$(this).trigger('chosen:updated');\n\t\t\t\t}\n\t\t\t} else if (value !== null && value.length > 1 && value.indexOf('all') > -1) {\n\n\t\t\t\t// Unset \"All\" from the Value\n\t\t\t\tfor (var key in value) {\n\t\t\t\t\tif (value[key] == 'all') {\n\t\t\t\t\t\tvalue.splice(key, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$(this).val(value);\n\n\t\t\t\tif ($(this).hasClass('edd-slack-chosen')) {\n\t\t\t\t\t$(this).trigger('chosen:updated');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tedd_slack_exclusion_toggle($(this), $(this).val());\n\t\t});\n\n\t\t$(document).on('edd-slack-conditional-fields-set', function (event, row) {\n\n\t\t\tedd_slack_exclusion_toggle(event, row);\n\t\t});\n\t});\n})(jQuery);\n'use strict';\n\n(function ($) {\n\n\t/**\n  * Modified version of https://www.sitepoint.com/oauth-popup-window/\n  * \n  * @param\t  {object} options Options to create the Popup\n  *\t\t\t\t\t\t \n  * @since\t  1.0.0\n  * @return\t  {object} EDDSlackOauthPopup\n  */\n\t$.EDDSlackOauthPopup = function (options) {\n\n\t\toptions.windowName = options.windowName || 'ConnectWithOAuth'; // should not include space for IE\n\t\toptions.windowOptions = options.windowOptions || 'location=0,status=0,width=800,height=400';\n\t\toptions.callback = options.callback || function () {\n\t\t\twindow.location.reload();\n\t\t};\n\t\toptions.redirectURI = options.redirectURI || false;\n\t\toptions.tokenType = options.tokenType || 'main';\n\n\t\tvar that = this;\n\t\tthat._oauthWindow = window.open(options.path, options.windowName, options.windowOptions);\n\t\tthat._oauthInterval = setInterval(function () {\n\n\t\t\ttry {\n\n\t\t\t\tif (that._oauthWindow.location.href.indexOf(options.redirectURI) !== -1 && that._oauthWindow.location.href.indexOf('&code=') !== -1 && that._oauthWindow.location.href.indexOf('&error=access_denied') == -1) {\n\n\t\t\t\t\tclearInterval(that._oauthInterval);\n\n\t\t\t\t\t// Setting State now rather than before ensures that we only Save the OAUTH Token once the Popup is closed out\n\t\t\t\t\t// Otherwise it Saves and immediately closes the Popup and the User doesn't get the Success Message\n\t\t\t\t\toptions.redirectURI = that._oauthWindow.location.href.replace('&state=', '&state=' + 'saving&token_type=' + options.tokenType);\n\n\t\t\t\t\t// Pass back our Temporary Code\n\t\t\t\t\toptions.callback(options.redirectURI);\n\n\t\t\t\t\tthat._oauthWindow.close();\n\t\t\t\t} else if (that._oauthWindow.location.href.indexOf('&error=access_denied') !== -1) {\n\n\t\t\t\t\tthat._oauthWindow.close();\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t// No errors for Cross Origin Policy\n\t\t\t}\n\t\t}, 100);\n\t};\n\n\t$(document).ready(function () {\n\n\t\tif ($('.edd-slack-app-auth').length > 0) {\n\n\t\t\t$('.edd-slack-app-auth').on('click', function (event) {\n\n\t\t\t\t// Don't actually go anywhere... yet\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tvar oAuthURL = $(this).attr('href'),\n\t\t\t\t    regex = /[?&]([^=#]+)=([^&#]*)/g,\n\t\t\t\t    match,\n\t\t\t\t    redirectURI = '';\n\n\t\t\t\twhile ((match = regex.exec(oAuthURL)) !== null) {\n\n\t\t\t\t\tif (match[1] !== 'redirect_uri') continue;\n\n\t\t\t\t\tredirectURI = decodeURIComponent(match[2]);\n\t\t\t\t}\n\n\t\t\t\t// Fixes dual-screen position\t\t\t\t\t\t Most browsers\t  Firefox\n\t\t\t\tvar dualScreenLeft = window.screenLeft != undefined ? window.screenLeft : screen.left,\n\t\t\t\t    dualScreenTop = window.screenTop != undefined ? window.screenTop : screen.top;\n\n\t\t\t\t// Set Popup Height/Width and the Height/Width of the Source Browser Window\n\t\t\t\tvar popupWidth = 700,\n\t\t\t\t    popupHeight = 650,\n\t\t\t\t    browserWidth = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width,\n\t\t\t\t    browserHeight = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height;\n\n\t\t\t\tvar left = browserWidth / 2 - popupWidth / 2 + dualScreenLeft;\n\t\t\t\tvar top = browserHeight / 2 - popupHeight / 2 + dualScreenTop;\n\n\t\t\t\tvar popup = $.EDDSlackOauthPopup({\n\t\t\t\t\tpath: oAuthURL,\n\t\t\t\t\tredirectURI: redirectURI,\n\t\t\t\t\twindowOptions: 'location=0,status=0,width=' + popupWidth + ',height=' + popupHeight + ',top=' + top + ',left=' + left,\n\t\t\t\t\ttokenType: $(this).data('token_type'),\n\t\t\t\t\tcallback: function callback(newURL) {\n\t\t\t\t\t\twindow.location = newURL; // \"Refresh\" the page with the new URL in order to save our OAUTH Token\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t});\n})(jQuery);","// Initialize special fields if they exist\nfunction init_edd_repeater_colorpickers( modal ) {\n\n\tvar regex = /value=\"(#(?:[0-9a-f]{3}){1,2})\"/i;\n\n\t// Only try to run if there are any Color Pickers within an EDD Repeater\n\tif ( jQuery( modal ).find( '.edd-color-picker' ).length > 0 ) {\n\n\t\t// Hit each colorpicker individually to ensure its settings are properly used\n\t\tjQuery( modal ).find( '.edd-color-picker' ).each( function( index, colorPicker ) {\n\n\t\t\t// Value exists in HTML but is inaccessable via JavaScript. No idea why.\n\t\t\tvar value = regex.exec( jQuery( colorPicker )[0].outerHTML );\n\t\t\t\n\t\t\tif ( value !== null ) {\n\t\t\t\tvalue = value[1]; // Set to Regex Match\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvalue = jQuery( colorPicker ).data( 'defaultColor' ); // Set to default\n\t\t\t}\n\n\t\t\tjQuery( colorPicker ).val( value ).attr( 'value', value ).wpColorPicker();\n\n\t\t} );\n\n\t}\n\n}\n\nfunction init_edd_repeater_chosen( modal ) {\n\n\t// Only try to run if there are any Chosen Fields within an EDD Repeater\n\tif ( jQuery( modal ).find( 'select.edd-slack-chosen' ).length ) {\n\n\t\t// Init Chosen Fields as a Glob per-row\n\t\tjQuery( modal ).find( '.edd-slack-chosen' ).chosen();\n\n\t}\n\n}\n\n// Repeaters\n( function ( $ ) {\n\n\tvar $repeaters = $( '[data-edd-rbm-repeater]' );\n\n\tif ( ! $repeaters.length ) {\n\t\treturn;\n\t}\n\n\tvar edd_repeater_show = function() {\n\n\t\t// Hide current title for new item and show default title\n\t\t$( this ).find( '.repeater-header div.title' ).html( $( this ).find( '.repeater-header div.title' ).data( 'repeater-default-title' ) );\n\n\t\t$( this ).stop().slideDown();\n\t\t\n\t\tvar repeater = $( this ).closest( '[data-edd-rbm-repeater]' );\n\n\t\t$( repeater ).trigger( 'edd-rbm-repeater-add', [$( this )] );\n\n\t}\n\n\tvar edd_repeater_hide = function() {\n\n\t\tvar repeater = $( this ).closest( '[data-edd-rbm-repeater]' ),\n\t\t\tconfirmDeletion = confirm( eddSlack.i18n.confirmDeletion );\n\t\t\t\n\t\tif ( confirmDeletion ) {\n\n\t\t\tvar $row = $( this ),\n\t\t\t\tuuid = $row.find( '[data-repeater-edit]' ).data( 'open' ),\n\t\t\t\t$modal = $( '[data-reveal=\"' + uuid + '\"]' ),\n\t\t\t\tpostID = $modal.find( '.edd-slack-post-id' ).val();\n\t\t\t\n\t\t\t$.ajax( {\n\t\t\t\t'type' : 'POST',\n\t\t\t\t'url' : eddSlack.ajax,\n\t\t\t\t'data' : {\n\t\t\t\t\t'action' : 'delete_edd_rbm_slack_notification',\n\t\t\t\t\t'post_id' : postID,\n\t\t\t\t},\n\t\t\t\tsuccess : function( response ) {\n\t\t\t\t\t\n\t\t\t\t\t// Remove whole DOM tree for the Modal.\n\t\t\t\t\t$modal.parent().remove();\n\n\t\t\t\t\t// Remove DOM Tree for the Notification \"Header\"\n\t\t\t\t\t$row.stop();\n\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\t\n\t\t\t\t\t\t$row.effect( 'highlight', { color : '#FFBABA' }, 300 ).dequeue().slideUp( 300, function () {\n\t\t\t\t\t\t\t$row.remove();\n\t\t\t\t\t\t} );\n\t\t\t\t\t\t\n\t\t\t\t\t} );\n\n\t\t\t\t\t$( repeater ).trigger( 'edd-rbm-repeater-remove', [$row] );\n\t\t\t\t\t\n\t\t\t\t},\n\t\t\t\terror : function( request, status, error ) {\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\t$repeaters.each( function () {\n\n\t\tvar $repeater = $( this ),\n\t\t\t$dummy = $repeater.find( '[data-repeater-dummy]' );\n\n\t\t// Repeater\n\t\t$repeater.repeater( {\n\n\t\t\trepeaters: [ {\n\t\t\t\tshow: edd_repeater_show,\n\t\t\t\thide: edd_repeater_hide,\n\t\t\t} ],\n\t\t\tshow: edd_repeater_show,\n\t\t\thide: edd_repeater_hide,\n\t\t\tready: function ( setIndexes ) {\n\t\t\t\t$repeater.find( 'tbody' ).on( 'sortupdate', setIndexes );\n\t\t\t}\n\n\t\t} );\n\n\t\tif ( $dummy.length ) {\n\t\t\t$dummy.remove();\n\t\t}\n\t\t\n\t\t$( document ).on( 'closed.zf.reveal', '.edd-rbm-repeater-content.reveal', function() {\n\t\t\t\n\t\t\tvar title = $( this ).find( 'td:first-of-type input[type!=\"hidden\"]' ),\n\t\t\t\tuuid = $( this ).closest( '.edd-rbm-repeater-content.reveal' ).data( 'reveal' ),\n\t\t\t\t$row = $( '[data-open=\"' + uuid + '\"]' );\n\t\t\t\n\t\t\tif ( $( title ).val() !== '' ) {\n\t\t\t\t$row.closest( '.edd-rbm-repeater-item' ).find( '.repeater-header div.title' ).html( $( title ).val() );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar defaultValue = $row.closest( '.edd-rbm-repeater-item' ).find( '.repeater-header div.title' ).data( 'repeater-default-title' );\n\t\t\t\t$row.closest( '.edd-rbm-repeater-item' ).find( '.repeater-header div.title' ).html( defaultValue );\n\t\t\t}\n\t\t\t\n\t\t} );\n\n\t} );\n\n} )( jQuery );","/**\n * Normally something like this would be handled by $( document ).foundation(), but doing it manually lets us call this whenever we'd like and dynamically create Button->Modal associations\n * \n * @since\t  1.0.0\n * @return\t  void\n */\nfunction initModals() {\n\n\tjQuery( '.edd-rbm-repeater .edd-rbm-repeater-item' ).each( function( index, item ) {\n\n\t\tvar $modal = jQuery( item ).find( '.edd-rbm-repeater-content.reveal' );\n\n\t\tif ( $modal.attr( 'data-reveal' ) !== '' ) return true;\n\n\t\t// Copy of how Foundation creates UUIDs\n\t\tvar uuid = Math.round( Math.pow( 36, 7 ) - Math.random() * Math.pow( 36, 6 ) ).toString( 36 ).slice( 1 ) + '-reveal';\n\n\t\t$modal.attr( 'data-reveal', uuid );\n\n\t\tvar $editButton = jQuery( item ).find( 'input[data-repeater-edit]' ).attr( 'data-open', uuid );\n\n\t\t$modal = new Foundation.Reveal( $modal );\n\n\t} );\n\n}\n\n/**\n * Opens a Modal because Foundation isn't able to do things quite how I need\n * \n * @param\t  {Event|String} uuid Either the Event from creating a new Row or a UUID\n * @param\t  {object}\t  row  DOM Object of the Row if called from an Event\n *\t\t\t\t\t\t\t\n * @since\t  1.0.0\n * @return\t  void\n */\nfunction openModal( uuid, row = undefined ) {\n\n\t// Handle newly created Rows\n\tif ( uuid.type == 'edd-rbm-repeater-add' ) {\n\n\t\tvar $row = jQuery( row );\n\n\t\tuuid = $row.find( 'input[data-repeater-edit]' ).data( 'open' );\n\n\t}\n\n\tvar $modal = jQuery( '[data-reveal=\"' + uuid + '\"]' );\n\t\n\t// Set the Selected Downloads Array to the value of the Downloads Field within the now open Modal\n\teddSlackSelectedDownloads = $modal.find( '.edd-slack-download' ).val();\n\t\n\t// If there's no value, set to an empty Array\n\teddSlackSelectedDownloads = ( eddSlackSelectedDownloads === null ) ? [] : eddSlackSelectedDownloads;\n\n\t$modal.foundation( 'open' );\n\n\t// Ensure we're looking at the top of the Modal\n\t$modal.closest( '.reveal-overlay' ).scrollTop( 0 );\n\n}\n\n/**\n * Closes a Modal by its UUID\n * \n * @param\t  {string} uuid UUID of the Modal\n *\t\t\t\t\t  \n * @since\t  1.0.0\n * @return\t  void\n */\nfunction closeModal( uuid ) {\n\n\tvar $modal = jQuery( '[data-reveal=\"' + uuid + '\"]' );\n\n\t$modal.foundation( 'close' );\n\n}\n\n( function( $ ) {\n\t'use strict';\n\n\t$( document ).ready( function() {\n\n\t\tinitModals();\n\n\t\t// This JavaScript only loads on our custom Page, so we're fine doing this\n\t\tvar $repeaters = $( '[data-edd-rbm-repeater]' );\n\n\t\tif ( $repeaters.length ) {\n\t\t\t$repeaters.on( 'edd-rbm-repeater-add', initModals );\n\t\t\t$repeaters.on( 'edd-rbm-repeater-add', openModal );\n\t\t}\n\n\t} );\n\t\n\t$( document ).on( 'click touched', '[data-repeater-edit]', function() {\n\t\t\n\t\topenModal( $( this ).data( 'open' ) );\n\t\t\n\t} );\n\t\n\t$( document ).on( 'open.zf.reveal', '.edd-rbm-repeater-content.reveal', function() {\n\t\t\n\t\tinit_edd_repeater_colorpickers( this );\n\t\tinit_edd_repeater_chosen( this );\n\t\t\n\t} );\n\n} )( jQuery );","( function( $ ) {\n\n\t/**\n\t * Sends a Slack Team Invite via Ajax\n\t * \n\t * @param\t\t{integer} id   EDD_Customer ID or FES_Vendor ID\n\t * @param \t\t{string}  type 'customer' or 'vendor'\n\t *                         \n\t * @since\t\t1.1.0\n\t * @return\t\tobject\t  JSON\n\t */\n\tvar sendInvite = function( id, type ) {\n\t\t\n\t\tvar output,\n\t\t\tnoAsync = {};\n\t\t\n\t\t// This forces the AJAX to complete on our time rather than its own\n\t\t// This way we can reliably have its results returned before executing another action in sequence rather than via a promise\n\t\tnoAsync = function( id, type ) {\n\t\t\t\n\t\t\tvar result = {};\n\t\t\t$.ajax( {\n\t\t\t\tasync: false,\n\t\t\t\ttype: 'POST',\n\t\t\t\turl: location.origin + ajaxurl,\n\t\t\t\tdata: {\n\t\t\t\t\tid: id,\n\t\t\t\t\ttype: type,\n\t\t\t\t\t_ajax_nonce: $( '#edd_slack_team_invite_nonce' ).val(),\n\t\t\t\t\taction: 'edd_slack_app_team_invite',\n\t\t\t\t},\n\t\t\t\tsuccess: function( response ) {\n\n\t\t\t\t\tvar message = '';\n\n\t\t\t\t\t// There's an Error\n\t\t\t\t\tif ( response.ok === false ) {\n\n\t\t\t\t\t\tswitch ( response.error ) {\n\t\t\t\t\t\t\tcase 'channel_not_found':\n\t\t\t\t\t\t\t\tmessage = eddSlack.i18n.slackInvite.channel_not_found;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'no_perms':\n\t\t\t\t\t\t\t\tmessage = eddSlack.i18n.slackInvite.no_perms;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase 'already_in_team':\n\t\t\t\t\t\t\t\tmessage = eddSlack.i18n.slackInvite.already_in_team;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tmessage = response.error;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\n\t\t\t\t\t\tmessage = eddSlack.i18n.slackInvite[ type + '_invite_successful' ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresult = {\n\t\t\t\t\t\tok: response.ok,\n\t\t\t\t\t\tmessage: message,\n\t\t\t\t\t};\n\n\t\t\t\t},\n\t\t\t\terror : function( request, status, error ) {\n\t\t\t\t\tconsole.error( request.responseText );\n\t\t\t\t\tconsole.error( error );\n\t\t\t\t}\n\t\t\t} );\n\t\t\t\n\t\t\treturn result;\n\t\t\t\n\t\t}( id, type );\n\t\t\n\t\toutput = noAsync;\n\t\t\n\t\treturn output;\n\t\t\n\t};\n\n\t/**\n\t * Grabs GET Parameter from the URL\n\t * \n\t * @param\t\t{string} variable Variable Name\n\t * @param \t\t{string} url      URL. Defaults to the current URL\n\t *                            \n\t * @since\t\t1.1.0\n\t * @return \t\t{string} Parameter Value\n\t */\n\tfunction getUrlParameter( variable, url = undefined ) {\n\n\t\tif ( url === undefined ) {\n\t\t\turl = window.location.href;\n\t\t}\n\t\t\n\t\t// Remove Hash from URL\n\t\turl = url.replace( /#.*$/, '' );\n\n\t\tvar vars = url.split( '&' );\n\n\t\tfor ( var i = 0; i < vars.length; i++ ) {\n\n\t\t\tvar pair = vars[ i ].split( '=' );\n\n\t\t\tif ( pair[0] == variable ) {\n\t\t\t\treturn pair[1];\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t$( document ).ready( function() {\n\n\t\t$( '#edd_slack_team_customer_invite_form, #edd_slack_team_vendor_invite_form' ).submit( function( event ) {\n\n\t\t\tevent.preventDefault();\n\t\t\t\n\t\t\tvar $form = $( this ),\n\t\t\t\t$submitButton = $( document.activeElement );\n\t\t\t\n\t\t\t$submitButton.attr( 'disabled', true );\n\t\t\t\n\t\t\t// Copy EDD's notice for AJAX sub-form submission because it is awesome\n\t\t\t$form.find( '.notice-wrap' ).remove();\n\t\t\t$form.append( '<div class=\"notice-wrap\"><span class=\"spinner is-active\"></span></div>' );\n\n\t\t\tvar id = getUrlParameter( 'id' ),\n\t\t\t\ttype = 'customer';\n\t\t\t\n\t\t\tif ( event.currentTarget.id == 'edd_slack_team_vendor_invite_form' ) type = 'vendor';\n\n\t\t\tvar result = sendInvite( id, type );\n\t\t\t\n\t\t\tif ( ! result.ok ) {\n\t\t\t\t$form.find( '.notice-wrap' ).append( '<div class=\"update error\"><p>' + result.message + '</p></div>' );\n\t\t\t\t$submitButton.attr( 'disabled', false );\n\t\t\t}\n\t\t\telse {\n\t\t\t\t$form.find( '.notice-wrap' ).append( '<div class=\"updated\"><p>' + result.message + '</p></div>' );\n\t\t\t}\n\t\t\t\n\t\t\t$form.find( '.notice-wrap .spinner' ).remove();\n\n\t\t} );\n\n\t} );\n\n} )( jQuery );","if ( ! HTMLFormElement.prototype.reportValidity ) {\n\n\t/**\n\t * Wait, people use IE and Safari outside of downloading Chrome?\n\t * \n\t * @since\t  1.0.0\n\t * @return\t  void\n\t */\n\tHTMLFormElement.prototype.reportValidity = function () {\n\t\t\n\t\tvar error = eddSlack.i18n.validationError,\n\t\t\tvalid = true;\n\t\t\n\t\t// Remove all old Validation Errors\n\t\tjQuery( this ).find( '.validation-error' ).remove();\n\t\t\n\t\tjQuery( this ).find( '.required' ).each( function( index, element ) {\n\t\t\t\n\t\t\t// Reset Custom Validity Message\n\t\t\telement.setCustomValidity( '' );\n\t\t\t\n\t\t\tif ( ! jQuery( element ).closest( 'td' ).hasClass( 'hidden') && \n\t\t\t\t( jQuery( element ).val() === null || jQuery( element ).val() == '' ) ) {\n\t\t\t\t\n\t\t\t\telement.setCustomValidity( error );\n\t\t\t\tjQuery( element ).before( '<span class=\"validation-error\">' + error + '</span>' );\n\t\t\t\t\n\t\t\t\tvalid = false;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t} );\n\t\t\n\t\tif ( ! valid ) {\n\t\t\t\n\t\t\tjQuery( this ).closest( '.reveal-overlay' ).scrollTop( jQuery( this ).find( '.validation-error:first-of-type' ) );\n\t\t\treturn valid;\n\t\t\t\n\t\t}\n\t\t\n\t\treturn valid;\n\t\t\n\t};\n\t\n};","( function( $ ) {\n\t\n\t/**\n\t * Submit the Form for Creating/Updating Notifications via their Modals\n\t * \n\t * @param\t  \t{object}  event JavaScript Event Object\n\t *\t\t\t\t\t\t\t  \n\t * @since\t  \t1.0.0\n\t * @returns\t \t{boolean} Validity of Form\n\t */\n\tvar attachNotificationSubmitEvent = function( event ) {\n\t\t\n\t\tvar modal = event.currentTarget,\n\t\t\t$form = $( modal ).find( 'form' );\n\t\t\n\t\tif ( ! $( modal ).hasClass( 'has-form' ) ) {\n\t\t\t\n\t\t\t// We need to create the Form\n\t\t\t// \"novalidate\" so that HTML5 doesn't try to take over before we can do our thing\n\t\t\t$form = $( modal ).find( '.edd-rbm-repeater-form' ).wrap( '<form method=\"POST\" novalidate></form>' ).parent();\n\t\t\t\n\t\t\t$( modal ).addClass( 'has-form' );\n\n\t\t\t// Normally HTML doesn't like us having nested Forms, so we force it like this\n\t\t\t// By the time the Modal opens and this code runs, the Form isn't nested anymore\n\t\t\t$form.submit( function( event ) {\n\t\t\t\t\n\t\t\t\t// This captures the Submit button\n\t\t\t\t// activeElement ensures it is the correct one in the event more Submit Buttons get added for some reason\n\t\t\t\tvar $submitButton = $( document.activeElement ),\n\t\t\t\t\tsubmitText = $submitButton.val();\n\t\t\t\t\n\t\t\t\t$submitButton.val( $submitButton.data( 'saving_text' ) ).attr( 'disabled', true );\n\n\t\t\t\tevent.preventDefault(); // Don't submit the form via PHP\n\t\t\t\t\n\t\t\t\t$form[0].reportValidity(); // Report Validity via HTML5 stuff\n\t\t\t\t\n\t\t\t\tif ( $form[0].checkValidity() ) { // Only run our code if we've got a Valid Form\n\n\t\t\t\t\t// Used to construct HTML Name Attribute\n\t\t\t\t\tvar repeaterList = $( '.edd-rbm-repeater-list' ).data( 'repeater-list' ),\n\t\t\t\t\t\tregex = new RegExp( repeaterList.replace( /[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&' ) + '\\\\[\\\\d\\\\]\\\\[(.*)\\\\]', 'gi' ),\n\t\t\t\t\t\tdata = {};\n\n\t\t\t\t\t$( this ).find( '.edd-slack-field:not( .chosen-container )' ).each( function( index, field ) {\n\n\t\t\t\t\t\tif ( $( field ).parent().hasClass( 'hidden' ) ) return true;\n\n\t\t\t\t\t\tvar name = $( field ).attr( 'name' ),\n\t\t\t\t\t\t\tmatch = regex.exec( name ),\n\t\t\t\t\t\t\tvalue = $( field ).val();\n\t\t\t\t\t\t\n\t\t\t\t\t\tif ( $( field ).is( 'input[type=\"checkbox\"]' ) ) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvalue = ( $( field ).prop( 'checked' ) ) ? 1 : 0;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Checkboxes don't place nice with my regex and I'm not rewriting it\n\t\t\t\t\t\tdata[ match[1].replace( '][', '' ) ] = value;\n\n\t\t\t\t\t\t// Reset Interal Pointer for Regex\n\t\t\t\t\t\tregex.lastIndex = 0;\n\n\t\t\t\t\t} );\n\t\t\t\t\t\n\t\t\t\t\tdata.action = 'insert_edd_rbm_slack_notification';\n\n\t\t\t\t\t$.ajax( {\n\t\t\t\t\t\t'type' : 'POST',\n\t\t\t\t\t\t'url' : eddSlack.ajax,\n\t\t\t\t\t\t'data' : data,\n\t\t\t\t\t\tsuccess : function( response ) {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar uuid = $( modal ).data( 'reveal' ),\n\t\t\t\t\t\t\t\t$row = $( '[data-open=\"' + uuid + '\"]' ).closest( '.edd-rbm-repeater-item' );\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// If the Modal started as a New Notification, we need to update the Post ID value to ensure it can be updated\n\t\t\t\t\t\t\t$form.find( '.edd-slack-post-id' ).val( response.data.post_id );\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcloseModal( uuid );\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t$submitButton.val( submitText ).attr( 'disabled', false );\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Highlight Green\n\t\t\t\t\t\t\t$row.effect( 'highlight', { color : '#DFF2BF' }, 1000 );\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror : function( request, status, error ) {\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\n\t\t\t\t\t$submitButton.val( submitText ).attr( 'disabled', false );\n\t\t\t\t\t\n\t\t\t\t}\n\n\t\t\t} );\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t$( document ).ready( function() {\n\t\t\n\t\t// When a Modal opens, attach the Form Submission Event\n\t\t$( document ).on( 'open.zf.reveal', '.edd-rbm-repeater-content.reveal', function( event ) {\n\t\t\tattachNotificationSubmitEvent( event );\n\t\t} );\n\t\t\n\t} );\n\t\n} )( jQuery );","/**\n * Global, overwritten on Modal open. This allows us to reliably determine the most recently selected <option>\n * Oddly there's no good way to do this\n *\t\t\t\t\t\t\t\t\t \n * @since\t  1.1.0\n */\nvar eddSlackSelectedDownloads = [];\n\n( function( $ ) {\n\t'use strict';\n\t\n\t/**\n\t * Conditionally Hide/Show Fields based on the selected Trigger\n\t * This also adds some basic Form Validation because EDD doesn't support Required Fields\n\t * \n\t * @param\t  {Event|String}  row\t\t  Either the Event from creating a new Row or the Slack Trigger Field\n\t * @param\t  {Object|string} option_class The new Row (unused) or the Value of the Slack Trigger Field\n\t *\t\t\t\t\t\t\t\t\t \n\t * @since\t  1.0.0\n\t * @return\t  void\n\t */\n\tvar edd_slack_conditional_fields = function( row, option_class ) {\n\t\t\n\t\t// Handle newly created Rows\n\t\tif ( row.type == 'edd-rbm-repeater-add' ) {\n\t\t\trow = option_class;\n\t\t\toption_class = 0;\n\t\t}\n\t\telse {\n\t\t\trow = $( row ).closest( '.edd-rbm-repeater-content' );\n\t\t}\n\t\t\n\t\tif ( option_class == 0 ) {\n\t\t\t\n\t\t\t$( row ).find( 'select' ).each( function( index, select ) {\n\t\t\t\t\n\t\t\t\t$( select ).val( 0 );\n\t\t\t\t\n\t\t\t\tif ( $( select ).hasClass( 'edd-slack-chosen' ) ) {\n\t\t\t\t\t$( select ).trigger( 'chosen:updated' );\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} );\n\t\t\t\n\t\t\t$( row ).find( '.edd-slack-conditional' ).closest( 'td' ).addClass( 'hidden' );\n\t\t\t$( row ).find( '.edd-slack-replacement-instruction' ).closest( 'td' ).addClass( 'hidden' );\n\t\t\t\n\t\t}\n\t\telse {\n\t\t\t\n\t\t\tvar $download = $( row ).find( 'select.edd-slack-download' ),\n\t\t\t\t$downloadExclusions = $( row ).find( 'select.edd-slack-exclude-download' );\n\t\t\t\n\t\t\tif ( eddSlack.variantExclusion !== undefined && \n\t\t\t\teddSlack.variantExclusion.indexOf( option_class ) > -1 ) {\n\t\t\t\t\n\t\t\t\t// Reset value if it is set to a variant\n\t\t\t\tif ( $download.val() !== null &&\n\t\t\t\t\t$download.val().every( function( value ) { return ( value.indexOf( '-' ) > -1 ) ? true : false; } ) ) $download.val( 0 );\n\t\t\t\t\n\t\t\t\tif ( $downloadExclusions.val() !== null &&\n\t\t\t\t\t$downloadExclusions.val().every( function( value ) { return ( value.indexOf( '-' ) > -1 ) ? true : false; } ) ) $downloadExclusions.val( 0 );\n\t\t\t\t\n\t\t\t\t$download.find( 'option[value*=\"-\"]' ).hide();\n\t\t\t\t$downloadExclusions.find( 'option[value*=\"-\"]' ).hide();\n\t\t\t\t\n\t\t\t}\n\t\t\telse {\n\t\t\t\t\n\t\t\t\t$download.find( 'option[value*=\"-\"]' ).show();\n\t\t\t\t$downloadExclusions.find( 'option[value*=\"-\"]' ).show();\n\t\t\t\t\n\t\t\t}\n\n\t\t\tif ( $download.hasClass( 'edd-slack-chosen' ) ) {\n\t\t\t\t$download.trigger( 'chosen:updated' );\n\t\t\t}\n\t\t\t\n\t\t\tif ( $downloadExclusions.hasClass( 'edd-slack-chosen' ) ) {\n\t\t\t\t$downloadExclusions.trigger( 'chosen:updated' );\n\t\t\t}\n\n\t\t\t$( row ).find( '.edd-slack-conditional.' + option_class ).closest( 'td.hidden' ).removeClass( 'hidden' );\n\t\t\t$( row ).find( '.edd-slack-conditional' ).not( '.' + option_class ).closest( 'td' ).addClass( 'hidden' );\n\t\t\t\n\t\t\t// Also do this for the Replacement Hints\n\t\t\t$( row ).find( '.edd-slack-replacement-instruction.' + option_class ).removeClass( 'hidden' );\n\t\t\t$( row ).find( '.edd-slack-replacement-instruction' ).not( '.' + option_class ).addClass( 'hidden' );\n\t\t\t\n\t\t}\n\t\t\n\t\t$( row ).find( '.required' ).each( function( index, field ) {\n\t\t\t\n\t\t\tif ( $( field ).closest( 'td' ).hasClass( 'hidden' ) ) {\n\t\t\t\t$( field ).attr( 'required', false );\n\t\t\t}\n\t\t\telse {\n\t\t\t\t$( field ).attr( 'required', true );\n\t\t\t}\n\t\t\t\n\t\t\t// Fix Tab Ordering Bug \n\t\t\tif ( $( field ).hasClass( 'edd-slack-chosen' ) ) {\n\t\t\t\t\n\t\t\t\t// Ensure the Chosen Container has been built\n\t\t\t\t$( field ).chosen();\n\t\t\t\t\n\t\t\t\t// No Tab index for the \"hidden\" Select field\n\t\t\t\t$( field ).attr( 'tabindex', -1 );\n\t\t\t\t\n\t\t\t\t// Why would you be unable to tab into it by default?!?!\n\t\t\t\t$( field ).siblings( '.chosen-container' ).find( '.chosen-single' ).attr( 'tabindex', 0 );\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t} );\n\t\t\n\t\t$( row ).find( 'input[type=\"checkbox\"].default-checked' ).each( function( index, checkbox ) {\n\t\t\t\n\t\t\t$( checkbox ).prop( 'checked', true );\n\t\t\t\n\t\t} );\n\t\t\n\t\t$( row ).find( '.edd-help-tip' ).each( function( index, tooltip ) {\n\t\t\t\n\t\t\t$( tooltip ).tooltip( {\n\t\t\t\tcontent: function() {\n\t\t\t\t\treturn $( tooltip ).prop( 'title' );\n\t\t\t\t},\n\t\t\t\ttooltipClass: 'edd-ui-tooltip',\n\t\t\t\tposition: {\n\t\t\t\t\tmy: 'center top',\n\t\t\t\t\tat: 'center bottom+10',\n\t\t\t\t\tcollision: 'flipfit',\n\t\t\t\t},\n\t\t\t\thide: {\n\t\t\t\t\tduration: 200,\n\t\t\t\t},\n\t\t\t\tshow: {\n\t\t\t\t\tduration: 200,\n\t\t\t\t},\n\t\t\t} );\n\t\t\t\n\t\t} );\n\t\t\n\t\t$( document ).trigger( 'edd-slack-conditional-fields-set', row );\n\n\t}\n\t\n\t/**\n\t * Conditionally Hide/Show the Download Exclusion Field based on the selected Download(s)\n\t * \n\t * @param\t  {Event|String}  row\t\tEither the Event from creating a new Row or the Download Exclusions Field\n\t * @param\t  {Object|string} value\t\tThe new Row (unused) or the Value of the Download(s)\n\t *\t\t\t\t\t\t\t\t\t \n\t * @since\t  1.1.0\n\t * @return\t  void\n\t */\n\tvar edd_slack_exclusion_toggle = function( row, value = false ) {\n\t\t\n\t\t// Handle newly created Rows\n\t\tif ( row.type == 'edd-rbm-repeater-add' || \n\t\t   row.type == 'edd-slack-conditional-fields-set' ) {\n\t\t\trow = value;\n\t\t\tvalue = false;\n\t\t}\n\t\telse {\n\t\t\t\n\t\t\trow = $( row ).closest( '.edd-rbm-repeater-content' );\n\t\t\t\n\t\t}\n\t\t\n\t\tvar $download = $( row ).find( '.edd-slack-download' );\n\t\t\t\n\t\tif ( value === false ) {\n\t\t\tvalue = $download.val();\n\t\t}\n\t\t\n\t\tif ( ! $( $download.closest( 'td' )[0] ).hasClass( 'hidden' ) &&\n\t\t\tvalue !== null &&\n\t\t\tvalue.indexOf( 'all' ) > -1 ) {\n\t\t\t\n\t\t\t$( row ).find( '.edd-slack-exclude-download' ).closest( 'td' ).removeClass( 'hidden' );\n\t\t\t\n\t\t}\n\t\telse {\n\t\t\t\n\t\t\t$( row ).find( '.edd-slack-exclude-download' ).closest( 'td' ).addClass( 'hidden' );\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\t/**\n\t * Add Notification Status Indiciators to show whether or not a Notification is \"active\"\n\t * \n\t * @since\t  1.0.0\n\t * @return\t  void\n\t */\n\tvar eddSlackNotificationIndicators = function() {\n\t\t\n\t\t$( '.repeater-header div[data-repeater-default-title]' ).each( function( index, header ) {\n\t\t\t\n\t\t\tvar active = true,\n\t\t\t\t$repeaterItem = $( header ).closest( 'div[data-repeater-item]' ),\n\t\t\t\tuuid = $repeaterItem.find( '[data-repeater-edit]' ).data( 'open' ),\n\t\t\t\t$modal = $( '[data-reveal=\"' + uuid + '\"]' );\n\t\t\t\n\t\t\t// Ensure Required Fields are Filled Out\n\t\t\t// This should only apply to Non-Saved Notifications, but if someone gets cheeky and attempts to get around my form validation this will tell them that they dun goof'd\n\t\t\t$modal.find( '.required' ).each( function( valueIndex, field ) {\n\t\t\t\t\n\t\t\t\tif ( ! $( field ).closest( 'td' ).hasClass( 'hidden' ) && \n\t\t\t\t\t$( field ).val() === null ) {\n\t\t\t\t\tactive = false;\n\t\t\t\t\treturn false; // Break out of execution, we already know we're invalid\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} );\n\t\t\t\n\t\t\t// If we're not saved yet\n\t\t\tif ( $modal.find( '.edd-slack-post-id' ).val() == '' ) {\n\t\t\t\tactive = false;\n\t\t\t}\n\t\t\t\n\t\t\t// Check for a Webhook URL\n\t\t\tif ( $( '.edd-slack-webhook-default' ).val() == '' &&\n\t\t\t\t$modal.find( '.edd-slack-webhook-url' ).val() == '' ) {\n\t\t\t\tactive = false;\n\t\t\t}\n\t\t\t\n\t\t\t$( header ).siblings( '.status-indicator' ).remove();\n\t\t\t\n\t\t\tif ( active === true ) {\n\t\t\t\t\n\t\t\t\t$( header ).after( '<span class=\"active status-indicator dashicons dashicons-yes\" aria-label=\"' + eddSlack.i18n.inactiveText + '\"></span>' );\n\t\t\t\t\n\t\t\t}\n\t\t\telse {\n\t\t\t\t\n\t\t\t\t$( header ).after( '<span class=\"inactive status-indicator dashicons dashicons-no\" aria-label=\"' + eddSlack.i18n.inactiveText + '\"></span>' );\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t} );\n\t\t\n\t}\n\t\n\t/**\n\t * Attach Event Handlers for things outside of basic Repeater-scope\n\t * \n\t * @since\t  1.0.0\n\t * @return\t  void\n\t */\n\tvar init_edd_slack_repeater_functionality = function() {\n\t\t\n\t\t// This JavaScript only loads on our custom Page, so we're fine doing this\n\t\tvar $repeaters = $( '[data-edd-rbm-repeater]' );\n\t\t\n\t\tif ( $repeaters.length ) {\n\t\t\t\n\t\t\t$repeaters.on( 'edd-rbm-repeater-add', edd_slack_conditional_fields );\n\t\t\t$repeaters.on( 'repeater-show', edd_slack_conditional_fields );\n\t\t\t\n\t\t\t$repeaters.on( 'edd-rbm-repeater-add', edd_slack_exclusion_toggle );\n\t\t\t$repeaters.on( 'repeater-show', edd_slack_exclusion_toggle );\n\t\t\t\n\t\t\t$( document ).on( 'closed.zf.reveal', '.edd-rbm-repeater-content.reveal', function() {\n\t\t\t\teddSlackNotificationIndicators();\n\t\t\t} );\n\t\t\t\n\t\t}\n\t\t\n\t}\n\t\n\tinit_edd_slack_repeater_functionality();\n\t\n\t$( document ).ready( function() {\n\t\t\n\t\t// Handle conditional fields on Page Load\n\t\t$( '.edd-slack-trigger' ).each( function( index, trigger ) {\n\t\t\tedd_slack_conditional_fields( trigger, $( trigger ).val() );\n\t\t} );\n\t\t\n\t\t$( '.repeater-header div[data-repeater-default-title]' ).each( function( index, header ) {\n\t\t\t\n\t\t\tvar active = true,\n\t\t\t\t$repeaterItem = $( header ).closest( 'div[data-repeater-item]' ),\n\t\t\t\tuuid = $repeaterItem.find( '[data-repeater-edit]' ).data( 'open' ),\n\t\t\t\t$modal = $( '[data-reveal=\"' + uuid + '\"]' );\n\t\t\n\t\t\t\tinit_edd_repeater_colorpickers( $modal );\n\t\t\t\tinit_edd_repeater_chosen( $modal );\n\t\t\t\n\t\t} );\n\t\t\n\t\teddSlackNotificationIndicators();\n\t\t\n\t\t// And toggle them on Change\n\t\t$( document ).on( 'change', '.edd-slack-trigger', function() {\n\t\t\t\n\t\t\tedd_slack_conditional_fields( $( this ), $( this ).val() );\n\t\t\t\n\t\t} );\n\t\t\n\t\t// Conditionally hide/show the Downloads Exclusion Field.\n\t\t// This also ensures if All Downloads is chosen, that ONLY All Downloads can be chosen\n\t\t$( document ).on( 'change', '.edd-slack-download', function() {\n\t\t\t\n\t\t\tvar value = $( this ).val(),\n\t\t\t\tjustAdded = '';\n\t\t\t\n\t\t\tif ( value !== null ) {\n\t\t\t\t\n\t\t\t\t// Array Diff\n\t\t\t\tjustAdded = value.filter( function( index ) {\n\t\t\t\t\treturn eddSlackSelectedDownloads.indexOf( index ) < 0;\n\t\t\t\t} );\n\t\t\t\t\n\t\t\t\t// Update Selected Downloads\n\t\t\t\teddSlackSelectedDownloads = value;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tif ( justAdded == 'all' ) {\n\t\t\t\t\n\t\t\t\t$( this ).val( 'all' );\n\t\t\t\t\n\t\t\t\tif ( $( this ).hasClass( 'edd-slack-chosen' ) ) {\n\t\t\t\t\t$( this ).trigger( 'chosen:updated' );\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\telse if ( value !== null &&\n\t\t\t\t\t value.length > 1 &&\n\t\t\t\t\tvalue.indexOf( 'all' ) > -1 ) {\n\t\t\t\t\n\t\t\t\t// Unset \"All\" from the Value\n\t\t\t\tfor ( var key in value ) {\n\t\t\t\t\tif ( value[ key ] == 'all' ) {\n\t\t\t\t\t\tvalue.splice( key, 1 );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t$( this ).val( value );\n\t\t\t\t\n\t\t\t\tif ( $( this ).hasClass( 'edd-slack-chosen' ) ) {\n\t\t\t\t\t$( this ).trigger( 'chosen:updated' );\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tedd_slack_exclusion_toggle( $( this ), $( this ).val() );\n\t\t\t\n\t\t} );\n\t\t\n\t\t$( document ).on( 'edd-slack-conditional-fields-set', function( event, row ) {\n\t\t\t\n\t\t\tedd_slack_exclusion_toggle( event, row );\n\t\t\t\n\t\t} );\n\t\t\n\t} );\n\n} )( jQuery );","( function ( $ ) {\n\n\t/**\n\t * Modified version of https://www.sitepoint.com/oauth-popup-window/\n\t * \n\t * @param\t  {object} options Options to create the Popup\n\t *\t\t\t\t\t\t \n\t * @since\t  1.0.0\n\t * @return\t  {object} EDDSlackOauthPopup\n\t */\n\t$.EDDSlackOauthPopup = function( options ) {\n\t\t\n\t\toptions.windowName = options.windowName ||  'ConnectWithOAuth'; // should not include space for IE\n\t\toptions.windowOptions = options.windowOptions || 'location=0,status=0,width=800,height=400';\n\t\toptions.callback = options.callback || function() { window.location.reload(); };\n\t\toptions.redirectURI = options.redirectURI || false;\n\t\toptions.tokenType = options.tokenType || 'main';\n\t\t\n\t\tvar that = this;\n\t\tthat._oauthWindow = window.open( options.path, options.windowName, options.windowOptions );\n\t\tthat._oauthInterval = setInterval( function() {\n\t\t\t\n\t\t\ttry {\n\t\t\t\t\n\t\t\t\tif ( that._oauthWindow.location.href.indexOf( options.redirectURI ) !== -1 &&\n\t\t\t\t\tthat._oauthWindow.location.href.indexOf( '&code=' ) !== -1 && \n\t\t\t\t\tthat._oauthWindow.location.href.indexOf( '&error=access_denied' ) == -1\n\t\t\t\t  ) {\n\t\t\t\t\t\n\t\t\t\t\tclearInterval( that._oauthInterval );\n\t\t\t\t\t\n\t\t\t\t\t// Setting State now rather than before ensures that we only Save the OAUTH Token once the Popup is closed out\n\t\t\t\t\t// Otherwise it Saves and immediately closes the Popup and the User doesn't get the Success Message\n\t\t\t\t\toptions.redirectURI = that._oauthWindow.location.href.replace( '&state=', '&state=' + 'saving&token_type=' + options.tokenType );\n\t\t\t\t\t\n\t\t\t\t\t// Pass back our Temporary Code\n\t\t\t\t\toptions.callback( options.redirectURI );\n\t\t\t\t\t\n\t\t\t\t\tthat._oauthWindow.close();\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse if ( that._oauthWindow.location.href.indexOf( '&error=access_denied' ) !== -1 ) {\n\t\t\t\t\t\n\t\t\t\t\tthat._oauthWindow.close();\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\tcatch ( e ) {\n\t\t\t\t // No errors for Cross Origin Policy\n\t\t\t}\n\t\t\t\n\t\t}, 100 );\n\t\t\n\t};\n\n\t$( document ).ready( function() {\n\t\t\n\t\tif ( $( '.edd-slack-app-auth' ).length > 0 ) {\n\n\t\t\t$( '.edd-slack-app-auth' ).on( 'click', function( event) {\n\n\t\t\t\t// Don't actually go anywhere... yet\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tvar oAuthURL = $( this ).attr( 'href' ),\n\t\t\t\t\tregex = /[?&]([^=#]+)=([^&#]*)/g,\n\t\t\t\t\tmatch,\n\t\t\t\t\tredirectURI = '';\n\n\t\t\t\twhile ( ( match = regex.exec( oAuthURL ) ) !== null ) {\n\n\t\t\t\t\tif ( match[1] !== 'redirect_uri' ) continue;\n\n\t\t\t\t\tredirectURI = decodeURIComponent( match[2] );\n\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Fixes dual-screen position\t\t\t\t\t\t Most browsers\t  Firefox\n\t\t\t\tvar dualScreenLeft = window.screenLeft != undefined ? window.screenLeft : screen.left,\n\t\t\t\t\tdualScreenTop = window.screenTop != undefined ? window.screenTop : screen.top;\n\t\t\t\t\n\t\t\t\t// Set Popup Height/Width and the Height/Width of the Source Browser Window\n\t\t\t\tvar popupWidth = 700,\n\t\t\t\t\tpopupHeight = 650,\n\t\t\t\t\tbrowserWidth = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width,\n\t\t\t\t\tbrowserHeight = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height;\n\n\t\t\t\tvar left = ( ( browserWidth / 2 ) - ( popupWidth / 2 ) ) + dualScreenLeft;\n\t\t\t\tvar top = ( ( browserHeight / 2 ) - ( popupHeight / 2 ) ) + dualScreenTop;\n\n\t\t\t\tvar popup = $.EDDSlackOauthPopup( {\n\t\t\t\t\tpath: oAuthURL,\n\t\t\t\t\tredirectURI: redirectURI,\n\t\t\t\t\twindowOptions: 'location=0,status=0,width=' + popupWidth + ',height=' + popupHeight + ',top=' + top + ',left=' + left,\n\t\t\t\t\ttokenType: $( this ).data( 'token_type' ),\n\t\t\t\t\tcallback: function( newURL ) {\n\t\t\t\t\t\twindow.location = newURL; // \"Refresh\" the page with the new URL in order to save our OAUTH Token\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t} );\n\t\t\t\n\t\t}\n\n\t} );\n\n} )( jQuery );"]}